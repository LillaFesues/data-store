{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap 2133b3a22b330810d927","webpack:///./node_modules/@normalized-db/core/lib/index.js","webpack:///./src/data-store/options/builder/base-options.builder.ts","webpack:///./src/error/empty-input-error.ts","webpack:///./src/event/base-event.ts","webpack:///./src/logging/idb-logging/idb-logger.ts","webpack:///./src/command/idb-command/idb-base-command.ts","webpack:///./src/command/idb-command/idb-base-write-command.ts","webpack:///./src/model/parent.ts","webpack:///./src/query/base-query.ts","webpack:///./src/command/idb-command/idb-base-update-command.ts","webpack:///./src/event/created-event.ts","webpack:///./src/event/removed-event.ts","webpack:///./src/error/index.ts","webpack:///./src/query/runner/idb-runner/idb-base-query-runner.ts","webpack:///./src/query/runner/idb-runner/idb-base-document-query-runner.ts","webpack:///./src/query/list-result/list-result.ts","webpack:///./src/query/model/filter.ts","webpack:///./src/query/map-reduce/reducer.ts","webpack:///./src/command/base-command.ts","webpack:///./src/event/utility/event-queue.ts","webpack:///./src/event/updated-event.ts","webpack:///./src/utility/refs-write.ts","webpack:///./src/command/idb-command/idb-clear-command.ts","webpack:///./src/event/cleared-event.ts","webpack:///./src/logging/logger.ts","webpack:///./src/logging/query/log-query.ts","webpack:///./src/logging/model/log-entry.ts","webpack:///./src/logging/idb-logging/idb-clear-logs-command.ts","webpack:///./src/logging/idb-logging/idb-log-query-runner.ts","webpack:///./src/error/child-not-found-error.ts","webpack:///./src/error/empty-result-error.ts","webpack:///./src/error/invalid-query-config-error.ts","webpack:///./src/error/listener-registered-error.ts","webpack:///./src/error/order-by-invalid-type-error.ts","webpack:///./src/error/order-by-type-mismatch-error.ts","webpack:///./src/error/ref-not-found-error.ts","webpack:///./src/command/idb-command/idb-command-factory.ts","webpack:///./src/command/idb-command/idb-create-command.ts","webpack:///./src/command/idb-command/idb-put-command.ts","webpack:///./src/command/idb-command/idb-remove-command.ts","webpack:///./src/utility/valid-key.ts","webpack:///./src/command/idb-command/idb-update-command.ts","webpack:///./src/context/context.ts","webpack:///./src/event/utility/event-pipe.ts","webpack:///./src/event/utility/event-registration.builder.ts","webpack:///./src/event/utility/event-registration.ts","webpack:///./src/context/context.builder.ts","webpack:///./src/context/idb-context/idb-context.ts","webpack:///./src/query/runner/idb-runner/idb-query-runner-factory.ts","webpack:///./src/query/runner/idb-runner/idb-count-query-runner.ts","webpack:///./src/query/runner/idb-runner/idb-query-runner.ts","webpack:///./src/query/model/sorter.ts","webpack:///./src/query/model/order.ts","webpack:///./src/query/list-result/index.ts","webpack:///./src/query/list-result/list-result.builder.ts","webpack:///./src/query/runner/idb-runner/idb-single-item-query-runner.ts","webpack:///./src/query/count-query.ts","webpack:///./src/query/query.ts","webpack:///./src/query/map-reduce/mapper.ts","webpack:///./src/query/model/query-config.ts","webpack:///./src/query/single-item-query.ts","webpack:///./src/logging/config/log-config.ts","webpack:///./src/index.ts","webpack:///./src/command/index.ts","webpack:///./src/command/idb-command/index.ts","webpack:///./src/error/invalid-query-runner-status-error.ts","webpack:///./src/error/query-runner-registered-error.ts","webpack:///./src/command/idb-command/idb-set-command.ts","webpack:///./src/context/index.ts","webpack:///./src/context/idb-context/index.ts","webpack:///./node_modules/idb/lib/idb.js","webpack:///./src/context/idb-context/idb-context.builder.ts","webpack:///./src/data-store/index.ts","webpack:///./src/data-store/data-store.ts","webpack:///./src/data-store/options/index.ts","webpack:///./src/data-store/options/builder/index.ts","webpack:///./src/data-store/options/builder/clear-options.builder.ts","webpack:///./src/data-store/options/builder/count-options.builder.ts","webpack:///./src/data-store/options/builder/create-options.builder.ts","webpack:///./src/data-store/options/builder/find-by-key-options.builder.ts","webpack:///./src/data-store/options/builder/find-options.builder.ts","webpack:///./src/data-store/options/builder/put-options.builder.ts","webpack:///./src/data-store/options/builder/remove-options.builder.ts","webpack:///./src/data-store/options/builder/set-options.builder.ts","webpack:///./src/data-store/options/builder/update-options.builder.ts","webpack:///./src/event/index.ts","webpack:///./src/event/utility/index.ts","webpack:///./src/logging/index.ts","webpack:///./src/logging/clear-command/index.ts","webpack:///./src/logging/clear-command/clear-logs-options.builder.ts","webpack:///./src/logging/config/index.ts","webpack:///./src/logging/config/log-config.builder.ts","webpack:///./src/logging/idb-logging/index.ts","webpack:///./src/logging/model/index.ts","webpack:///./src/logging/query/index.ts","webpack:///./src/logging/query/log-query-config.ts","webpack:///./src/model/index.ts","webpack:///./src/query/index.ts","webpack:///./src/query/map-reduce/index.ts","webpack:///./src/query/model/index.ts","webpack:///./src/query/runner/index.ts","webpack:///./src/query/runner/idb-runner/index.ts","webpack:///./src/utility/index.ts"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,O;ACVA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAK;AACL;AACA;;AAEA;AACA;AACA;AACA,mCAA2B,0BAA0B,EAAE;AACvD,yCAAiC,eAAe;AAChD;AACA;AACA;;AAEA;AACA,8DAAsD,+DAA+D;;AAErH;AACA;;AAEA;AACA;;;;;;;AC7DA;AACA,IAAI,IAAyD;AAC7D;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,oCAAoC;AACpC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,mCAAmC,0BAA0B,EAAE;AAC/D,yCAAyC,eAAe;AACxD;AACA;AACA;AACA;AACA;AACA,8DAA8D,+DAA+D;AAC7H;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;;AAEA;;AAEA,8CAA8C,cAAc;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA,OAAO;AACP;AACA;;AAEA;;AAEA,8CAA8C,cAAc;AAC5D;AACA;AACA;AACA;;;AAGA,OAAO;AACP;AACA;;AAEA;;AAEA,8CAA8C,cAAc;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sBAAsB;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;;;AAGA,OAAO;AACP;AACA;;AAEA;;AAEA,8CAA8C,cAAc;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA,OAAO;AACP;AACA;;AAEA;;AAEA,8CAA8C,cAAc;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qCAAqC,8BAA8B,EAAE;AACrE,sCAAsC,6DAA6D,EAAE;AACrG;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sFAAsF,aAAa;AACnG;AACA;AACA,iGAAiG,aAAa;AAC9G;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB;AACnB;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;;;AAGA,OAAO;AACP;AACA;;AAEA;;AAEA,8CAA8C,cAAc;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mCAAmC,sCAAsC;AACzE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;;;AAGA,OAAO;AACP;AACA;;AAEA;;AAEA,8CAA8C,cAAc;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wCAAwC,wBAAwB;AAChE,sBAAsB;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mCAAmC;AACnC;AACA;AACA;AACA;AACA;AACA,wCAAwC,wBAAwB;AAChE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA,CAAC;AACD;;;AAGA,OAAO;AACP;AACA;;AAEA;;;AAGA,OAAO;AACP;AACA;;AAEA;;AAEA;AACA;AACA;AACA,8CAA8C,cAAc;AAC5D;AACA;AACA;AACA;;;AAGA,OAAO;AACP;AACA;;AAEA;;AAEA,8CAA8C,cAAc;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA,OAAO;AACP;AACA;;AAEA;;AAEA;AACA;AACA,UAAU,gBAAgB,sCAAsC,iBAAiB,EAAE;AACnF,yBAAyB,uDAAuD;AAChF;AACA;AACA,uBAAuB,sBAAsB;AAC7C;AACA;AACA,CAAC;AACD,8CAA8C,cAAc;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;;;AAGA,OAAO;AACP;AACA;;AAEA;;AAEA;AACA;AACA,UAAU,gBAAgB,sCAAsC,iBAAiB,EAAE;AACnF,yBAAyB,uDAAuD;AAChF;AACA;AACA,uBAAuB,sBAAsB;AAC7C;AACA;AACA,CAAC;AACD,8CAA8C,cAAc;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;;;AAGA,OAAO;AACP;AACA;;AAEA;;AAEA;AACA;AACA,UAAU,gBAAgB,sCAAsC,iBAAiB,EAAE;AACnF,yBAAyB,uDAAuD;AAChF;AACA;AACA,uBAAuB,sBAAsB;AAC7C;AACA;AACA,CAAC;AACD,8CAA8C,cAAc;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;;;AAGA,OAAO;AACP;AACA;;AAEA;;AAEA;AACA;AACA,UAAU,gBAAgB,sCAAsC,iBAAiB,EAAE;AACnF,yBAAyB,uDAAuD;AAChF;AACA;AACA,uBAAuB,sBAAsB;AAC7C;AACA;AACA,CAAC;AACD,8CAA8C,cAAc;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;;;AAGA,OAAO;AACP;AACA;;AAEA;;AAEA,8CAA8C,cAAc;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iCAAiC,6CAA6C,EAAE;AAChF;AACA;AACA;;;AAGA,OAAO;AACP;AACA;;AAEA;;AAEA,8CAA8C,cAAc;AAC5D;AACA;AACA,8BAA8B,WAAW;AACzC;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;;;AAGA,OAAO;AACP;AACA;;AAEA;;AAEA,8CAA8C,cAAc;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;;;AAGA,OAAO;AACP;AACA;;AAEA;;AAEA,8CAA8C,cAAc;AAC5D;AACA;AACA;AACA;AACA,CAAC;AACD;;;AAGA,OAAO;AACP;AAC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AACA;AACA;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,OAAO;AACP;AACA,GAAG;;AAEH;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,OAAO;AACP;AACA,GAAG;;AAEH;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,OAAO;AACP,KAAK;AACL;AACA;AACA;AACA;;AAEA,MAAM,IAA6B;AACnC;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;;;;;;;;;;;;;;;;;;;ACzTD,oCAA6C;AAE7C,gDAAoD;AAEpD,4CAA2C;AAE3C;IAAqE,qCAAwC;IAA7G;;IA+CA,CAAC;IAzCQ,kCAAM,GAAb,UAAc,KAAa;QACzB,IAAI,CAAC,OAAO,GAAG,KAAK,CAAC;QACrB,MAAM,CAAC,IAAI,CAAC;IACd,CAAC;IAEM,qCAAS,GAAhB,UAAiB,KAAa;QAC5B,IAAI,CAAC,UAAU,GAAG,KAAK,CAAC;QACxB,MAAM,CAAC,IAAI,CAAC;IACd,CAAC;IAEM,qCAAS,GAAhB,UAAiB,KAA0B;QACzC,IAAI,CAAC,UAAU,GAAG,KAAK,CAAC;QACxB,MAAM,CAAC,IAAI,CAAC;IACd,CAAC;IAEM,iCAAK,GAAZ;QACE,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,OAAO,EAAE,CAAC,CAAC,CAAC;YACpB,MAAM,IAAI,KAAK,CACX,4GAA4G,CAAC,CAAC;QACpH,CAAC;QAED,IAAM,MAAM,GAAc;YACxB,IAAI,EAAE,IAAI,CAAC,OAAO;YAClB,OAAO,EAAE,IAAI,CAAC,UAAU;YACxB,OAAO,EAAE,IAAI,CAAC,UAAU;SACzB,CAAC;QAEF,IAAM,OAAO,GAAG,IAAI,wBAAU,CAAQ,IAAI,CAAC,OAAO,EAAE,IAAI,CAAC,kBAAkB,EAAE,IAAI,CAAC,oBAAoB,EAAE,MAAM,CAAC,CAAC;QAChH,EAAE,CAAC,CAAC,IAAI,CAAC,cAAc,CAAC,CAAC,CAAC;YACxB,OAAO,CAAC,MAAM,EAAE,CAAC,MAAM,CAAC,IAAI,CAAC,cAAc,CAAC,CAAC;QAC/C,CAAC;QAED,MAAM,CAAC,OAAO,CAAC;IACjB,CAAC;IAES,mCAAO,GAAjB;QACE,MAAM,CAAC,IAAI,CAAC,OAAO;YACf,IAAI,CAAC,OAAO,CAAC,MAAM,GAAG,CAAC;YACvB,CAAC,aAAM,CAAC,IAAI,CAAC,UAAU,CAAC;YACxB,IAAI,CAAC,UAAU,GAAG,CAAC,CAAC;IAC1B,CAAC;IACH,wBAAC;AAAD,CAAC,CA/CoE,gCAAc,GA+ClF;AA/CY,8CAAiB;;;;;;;;;;;;;ACN9B,2CAAyC;AAOvC,oBAPO,sBAAS,CAOP;AAJX,kCAA0B;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACC1B,4CAAkD;AAClD,sCAAuC;AACvC,kDAA6D;AAa7D;IAIE,mBAA6B,QAAwB,EAAmB,iBAAwB;QAAxB,4DAAwB;QAAnE,aAAQ,GAAR,QAAQ,CAAgB;QAAmB,sBAAiB,GAAjB,iBAAiB,CAAO;QAC9F,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC,QAAQ,CAAC,SAAS,CAAC;IAC3C,CAAC;IASM,yBAAK,GAAZ,UAAuC,IAAW,EAAE,OAAsB;QACxE,MAAM,CAAC,IAAI,wBAAU,CAAO,IAAI,CAAC,QAAQ,EAAE,IAAI,CAAC,WAAW,CAAC,OAAO,CAAC,EAAE,IAAI,CAAC,CAAC;IAC9E,CAAC;IAUM,wBAAI,GAAX,UAAwC,IAAW,EAAE,OAAqB;QACxE,MAAM,CAAC,IAAI,aAAK,CAAS,IAAI,CAAC,QAAQ,EAAE,IAAI,CAAC,WAAW,CAAC,OAAO,CAAC,EAAE,IAAI,CAAC,CAAC;IAC3E,CAAC;IAWM,6BAAS,GAAhB,UAA6C,IAAW,EACX,GAAa,EACb,OAA0B;QACrE,MAAM,CAAC,IAAI,mCAAe,CAAS,IAAI,CAAC,QAAQ,EAAE,IAAI,CAAC,WAAW,CAAC,OAAO,CAAC,EAAE,IAAI,EAAE,GAAG,CAAC,CAAC;IAC1F,CAAC;IAWY,0BAAM,GAAnB,UAA8C,IAAW,EACX,IAAmB,EACnB,OAAuB;;;;;;wBAC7D,GAAG,GAAG,IAAI,CAAC,QAAQ,CAAC,cAAc,EAAE,CAAC,aAAa,CAAO,IAAI,CAAC,CAAC;wBACrD,WAAM,GAAG,CAAC,OAAO,CAAC,IAAI,EAAE,OAAO,GAAG,OAAO,CAAC,MAAM,GAAG,IAAI,CAAC;;wBAAlE,OAAO,GAAG,SAAwD;wBACxE,IAAI,CAAC,SAAS,CAAC,OAAO,CAAC,CAAC;wBACxB,WAAO,OAAO,EAAC;;;;KAChB;IAYY,0BAAM,GAAnB,UAA8C,IAAW,EACX,IAAmB,EACnB,OAAuB;;;;;;wBAC7D,GAAG,GAAG,IAAI,CAAC,QAAQ,CAAC,cAAc,EAAE,CAAC,aAAa,CAAO,IAAI,CAAC,CAAC;wBACrD,WAAM,GAAG,CAAC,OAAO,CAAC,IAAI,EAAE,OAAO,IAAI,OAAO,CAAC,eAAe,CAAC;;wBAArE,OAAO,GAAG,SAA2D;wBAC3E,IAAI,CAAC,SAAS,CAAC,OAAO,CAAC,CAAC;wBACxB,WAAO,OAAO,EAAC;;;;KAChB;IAaY,uBAAG,GAAhB,UAAsC,IAAW,EAAE,GAAa,EAAE,IAAU,EAAE,OAAoB;;;;;;wBAC1F,GAAG,GAAG,IAAI,CAAC,QAAQ,CAAC,cAAc,EAAE,CAAC,UAAU,CAAO,IAAI,CAAC,CAAC;wBAClD,WAAM,GAAG,CAAC,OAAO,CAAC,GAAG,EAAE,IAAI,CAAC;;wBAAtC,OAAO,GAAG,SAA4B;wBAC5C,IAAI,CAAC,SAAS,CAAC,OAAO,CAAC,CAAC;wBACxB,WAAO,OAAO,EAAC;;;;KAChB;IAUY,uBAAG,GAAhB,UAA2C,IAAW,EAAE,IAAmB,EAAE,OAAoB;;;;;;wBACzF,GAAG,GAAG,IAAI,CAAC,QAAQ,CAAC,cAAc,EAAE,CAAC,UAAU,CAAO,IAAI,CAAC,CAAC;wBAClD,WAAM,CAAC,OAAO;kCACxB,GAAG,CAAC,OAAO,CAAC,IAAI,EAAE,OAAO,CAAC,MAAM,EAAE,OAAO,CAAC,eAAe,CAAC;kCAC1D,GAAG,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC;;wBAFlB,OAAO,GAAG,SAEQ;wBACxB,IAAI,CAAC,SAAS,CAAC,OAAO,CAAC,CAAC;wBACxB,WAAO,OAAO,EAAC;;;;KAChB;IAWY,0BAAM,GAAnB,UAA8C,IAAW,EACX,IAAqB,EACrB,OAAuB;;;;;;wBAC7D,GAAG,GAAG,IAAI,CAAC,QAAQ,CAAC,cAAc,EAAE,CAAC,aAAa,CAAO,IAAI,CAAC,CAAC;wBACrD,WAAM,GAAG,CAAC,OAAO,CAAC,IAAI,CAAC;;wBAAjC,OAAO,GAAG,SAAuB;wBACvC,IAAI,CAAC,SAAS,CAAC,OAAO,CAAC,CAAC;wBACxB,WAAO,OAAO,EAAC;;;;KAChB;IASY,yBAAK,GAAlB,UAAmB,IAAwB,EAAE,OAAsB;;;;;4BACjD,WAAM,IAAI,CAAC,QAAQ,CAAC,cAAc,EAAE,CAAC,YAAY,CAAC,OAAO,IAAI,OAAO,CAAC,WAAW,CAAC,CAAC,OAAO,CAAC,IAAI,CAAC;;wBAAzG,OAAO,GAAG,SAA+F;wBAC/G,IAAI,CAAC,SAAS,CAAC,OAAO,CAAC,CAAC;wBACxB,WAAO,OAAO,EAAC;;;;KAChB;IAEO,+BAAW,GAAnB,UAAoB,OAAoB;QACtC,MAAM,CAAC,CAAC,OAAO,IAAI,OAAO,CAAC,gBAAgB,CAAC,IAAI,IAAI,CAAC,iBAAiB,CAAC;IACzE,CAAC;IAEa,6BAAS,GAAvB,UAAwB,OAAoB;;;;;6BACtC,IAAI,CAAC,WAAW,CAAC,OAAO,CAAC,EAAzB,cAAyB;wBAC3B,WAAM,IAAI,CAAC,QAAQ,CAAC,KAAK,EAAE;;wBAA3B,SAA2B,CAAC;;;;;;KAE/B;IACH,gBAAC;AAAD,CAAC;AA9JY,8BAAS;;;;;;;;;;;;;ACRtB,kCAA0B;;;;;;;;;;ACX1B,oDAA4D;AAY1D,6BAZO,yCAAkB,CAYP;AAXpB,sDAA8D;AAoB5D,8BApBO,2CAAmB,CAoBP;AAnBrB,sDAA8D;AAW5D,8BAXO,2CAAmB,CAWP;AAVrB,uDAAgE;AAa9D,+BAbO,6CAAoB,CAaP;AAZtB,4DAAwE;AAWtE,kCAXO,qDAAuB,CAWP;AAVzB,qDAA4D;AAS1D,6BATO,yCAAkB,CASP;AARpB,oDAA0D;AAaxD,4BAbO,uCAAiB,CAaP;AAZnB,uDAAgE;AAa9D,+BAbO,6CAAoB,CAaP;AAZtB,oDAA0D;AAUxD,4BAVO,uCAAiB,CAUP;AATnB,uDAAgE;AAQ9D,+BARO,6CAAoB,CAQP;;;;;;;;;;;;;;;;;;;;AChBtB,oDAA4D;AAE5D;IAAyC,uCAAgC;IAAzE;;IAYA,CAAC;IARQ,yCAAW,GAAlB,UAAmB,KAAc;QAC/B,IAAI,CAAC,YAAY,GAAG,KAAK,CAAC;QAC1B,MAAM,CAAC,IAAI,CAAC;IACd,CAAC;IAEM,mCAAK,GAAZ;QACE,MAAM,CAAC,IAAI,CAAC,UAAU,CAAC,EAAE,WAAW,EAAE,IAAI,CAAC,YAAY,EAAE,CAAC,CAAC;IAC7D,CAAC;IACH,0BAAC;AAAD,CAAC,CAZwC,yCAAkB,GAY1D;AAZY,kDAAmB;;;;;;;;;;;;;;;;;;;;ACFhC,oDAA4D;AAE5D;IAAyC,uCAAgC;IAAzE;;IAKA,CAAC;IAHQ,mCAAK,GAAZ;QACE,MAAM,CAAC,IAAI,CAAC,SAAS,EAAE,CAAC;IAC1B,CAAC;IACH,0BAAC;AAAD,CAAC,CALwC,yCAAkB,GAK1D;AALY,kDAAmB;;;;;;;;;;;;;;;;;;;;ACDhC,oDAA4D;AAE5D;IAA0C,wCAAiC;IAA3E;;IAYA,CAAC;IARQ,qCAAM,GAAb,UAAc,KAAa;QACzB,IAAI,CAAC,OAAO,GAAG,KAAK,CAAC;QACrB,MAAM,CAAC,IAAI,CAAC;IACd,CAAC;IAEM,oCAAK,GAAZ;QACE,MAAM,CAAC,IAAI,CAAC,UAAU,CAAC,EAAE,MAAM,EAAE,IAAI,CAAC,OAAO,EAAE,CAAC,CAAC;IACnD,CAAC;IACH,2BAAC;AAAD,CAAC,CAZyC,yCAAkB,GAY3D;AAZY,oDAAoB;;;;;;;;;;;;;;;;;;;;ACHjC,oDAA4D;AAE5D;IAA6C,2CAAoC;IAAjF;;IAKA,CAAC;IAHQ,uCAAK,GAAZ;QACE,MAAM,CAAC,IAAI,CAAC,SAAS,EAAE,CAAC;IAC1B,CAAC;IACH,8BAAC;AAAD,CAAC,CAL4C,yCAAkB,GAK9D;AALY,0DAAuB;;;;;;;;;;;;;;;;;;;;ACFpC,oDAA4D;AAE5D;IAAwC,sCAA+B;IAAvE;;IAKA,CAAC;IAHQ,kCAAK,GAAZ;QACE,MAAM,CAAC,IAAI,CAAC,SAAS,EAAE,CAAC;IAC1B,CAAC;IACH,yBAAC;AAAD,CAAC,CALuC,yCAAkB,GAKzD;AALY,gDAAkB;;;;;;;;;;;;;;;;;;;;ACD/B,oDAA4D;AAE5D;IAAuC,qCAA8B;IAArE;;IAqBA,CAAC;IAhBQ,kCAAM,GAAb,UAAc,KAAa;QACzB,IAAI,CAAC,OAAO,GAAG,KAAK,CAAC;QACrB,MAAM,CAAC,IAAI,CAAC;IACd,CAAC;IAEM,2CAAe,GAAtB,UAAuB,KAAc;QACnC,IAAI,CAAC,gBAAgB,GAAG,KAAK,CAAC;QAC9B,MAAM,CAAC,IAAI,CAAC;IACd,CAAC;IAEM,iCAAK,GAAZ;QACE,MAAM,CAAC,IAAI,CAAC,UAAU,CAAC;YACrB,MAAM,EAAE,IAAI,CAAC,OAAO;YACpB,eAAe,EAAE,IAAI,CAAC,gBAAgB;SACvC,CAAC,CAAC;IACL,CAAC;IACH,wBAAC;AAAD,CAAC,CArBsC,yCAAkB,GAqBxD;AArBY,8CAAiB;;;;;;;;;;;;;;;;;;;;ACH9B,oDAA4D;AAE5D;IAA0C,wCAAiC;IAA3E;;IAKA,CAAC;IAHQ,oCAAK,GAAZ;QACE,MAAM,CAAC,IAAI,CAAC,SAAS,EAAE,CAAC;IAC1B,CAAC;IACH,2BAAC;AAAD,CAAC,CALyC,yCAAkB,GAK3D;AALY,oDAAoB;;;;;;;;;;;;;;;;;;;;ACFjC,oDAA4D;AAE5D;IAAuC,qCAA8B;IAArE;;IAKA,CAAC;IAHQ,iCAAK,GAAZ;QACE,MAAM,CAAC,IAAI,CAAC,SAAS,EAAE,CAAC;IAC1B,CAAC;IACH,wBAAC;AAAD,CAAC,CALsC,yCAAkB,GAKxD;AALY,8CAAiB;;;;;;;;;;;;;;;;;;;;ACD9B,oDAA4D;AAE5D;IAA0C,wCAAiC;IAA3E;;IAYA,CAAC;IARQ,8CAAe,GAAtB,UAAuB,KAAc;QACnC,IAAI,CAAC,gBAAgB,GAAG,KAAK,CAAC;QAC9B,MAAM,CAAC,IAAI,CAAC;IACd,CAAC;IAEM,oCAAK,GAAZ;QACE,MAAM,CAAC,IAAI,CAAC,UAAU,CAAC,EAAE,eAAe,EAAE,IAAI,CAAC,gBAAgB,EAAE,CAAC,CAAC;IACrE,CAAC;IACH,2BAAC;AAAD,CAAC,CAZyC,yCAAkB,GAY3D;AAZY,oDAAoB;;;;;;;;;;;;;ACJjC,0CAAyC;AASvC,oBATO,sBAAS,CASP;AARX,8CAA+C;AAY7C,uBAZO,4BAAY,CAYP;AAXd,8CAA+C;AAQ7C,uBARO,4BAAY,CAQP;AAPd,8CAA+C;AAS7C,uBATO,4BAAY,CASP;AARd,8CAA+C;AAO7C,uBAPO,4BAAY,CAOP;AALd,kCAA0B;;;;;;;;;;ACN1B,2CAAyC;AAUvC,oBAVO,sBAAS,CAUP;AATX,4CAA2C;AAUzC,qBAVO,wBAAU,CAUP;AATZ,mDAAyD;AAMvD,4BANO,sCAAiB,CAMP;AALnB,2DAAwE;AAMtE,mCANO,qDAAwB,CAMP;;;;;;;;;;;;;ACT1B,uCAAkC;AAShC,iBATO,eAAM,CASP;AAPR,kCAAgC;AAChC,kCAAyB;AACzB,kCAA8B;AAC9B,kCAAwB;AACxB,kCAAwB;;;;;;;;;;ACJxB,2DAAuE;AAKrE,kCALO,oDAAuB,CAKP;;;;;;;;;;;;;;;;;;;;ACNzB,oDAA2F;AAI3F;IACY,2CAA2C;IADvD;;IAsBA,CAAC;IAhBQ,uCAAK,GAAZ,UAAa,KAAsB;QACjC,IAAI,CAAC,MAAM,GAAG,KAAK,CAAC;QACpB,MAAM,CAAC,IAAI,CAAC;IACd,CAAC;IAEM,qCAAG,GAAV,UAAW,KAAe;QACxB,IAAI,CAAC,IAAI,GAAG,KAAK,CAAC;QAClB,MAAM,CAAC,IAAI,CAAC;IACd,CAAC;IAEM,uCAAK,GAAZ;QACE,MAAM,CAAC,IAAI,CAAC,UAAU,CAAC;YACrB,KAAK,EAAE,IAAI,CAAC,MAAM;YAClB,GAAG,EAAE,IAAI,CAAC,IAAI;SACf,CAAC,CAAC;IACL,CAAC;IACH,8BAAC;AAAD,CAAC,CArBW,yCAAkB,GAqB7B;AAtBY,0DAAuB;;;;;;;;;;ACLpC,2CAAyC;AAIvC,oBAJO,sBAAS,CAIP;AAHX,mDAAwD;AAItD,2BAJO,qCAAgB,CAIP;;;;;;;;;;ACHlB,2CAAyC;AAEzC;IAAA;QAEmB,WAAM,GAAG,IAAI,GAAG,EAA0B,CAAC;IA0B9D,CAAC;IAtBQ,qCAAU,GAAjB,UAAkB,MAAuB;QACvC,IAAI,CAAC,cAAc,GAAG,MAAM,CAAC;QAC7B,MAAM,CAAC,IAAI,CAAC;IACd,CAAC;IAEM,kCAAO,GAAd,UAAe,IAAW;QACxB,MAAM,CAAC,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC;IAC/B,CAAC;IAEM,kCAAO,GAAd,UAAe,IAAW,EAAE,MAAuB;QACjD,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC,IAAI,EAAE,MAAM,CAAC,CAAC;QAC9B,MAAM,CAAC,IAAI,CAAC;IACd,CAAC;IAEM,qCAAU,GAAjB,UAAkB,IAAW;QAC3B,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC;QACzB,MAAM,CAAC,IAAI,CAAC;IACd,CAAC;IAEM,gCAAK,GAAZ;QACE,MAAM,CAAC,IAAI,sBAAS,CAAQ,IAAI,CAAC,MAAM,EAAE,IAAI,CAAC,cAAc,CAAC,CAAC;IAChE,CAAC;IACH,uBAAC;AAAD,CAAC;AA5BY,4CAAgB;;;;;;;;;;ACJ7B,uDAA+D;AAO7D,8BAPO,4CAAmB,CAOP;AANrB,qDAA2D;AAKzD,4BALO,wCAAiB,CAKP;AAJnB,0CAAyC;AAGvC,oBAHO,sBAAS,CAGP;;;;;;;;;;ACJX,0CAAuC;AAIrC,mBAJO,oBAAQ,CAIP;;;;;;;;;;ACLV,0CAAuC;AAKrC,mBALO,oBAAQ,CAKP;AAJV,iDAAoD;AAKlD,yBALO,iCAAc,CAKP;;;;;;;;;;ACAhB;IAAA;IAQA,CAAC;IAAD,qBAAC;AAAD,CAAC;AARY,wCAAc;;;;;;;;;;ACL3B,sCAAkC;AAKhC,iBALO,eAAM,CAKP;;;;;;;;;;;;;ACNR,0CAAyC;AAavC,oBAbO,sBAAS,CAaP;AAZX,4CAA2C;AAazC,qBAbO,wBAAU,CAaP;AAZZ,sCAAgC;AAa9B,gBAbO,aAAK,CAaP;AAXP,kDAAsD;AAYpD,0BAZO,mCAAe,CAYP;AAVjB,kCAA8B;AAC9B,kCAA6B;AAC7B,mCAAwB;AACxB,mCAAyB;;;;;;;;;;ACRzB,uCAAkC;AAMhC,iBANO,eAAM,CAMP;AAJR,wCAAoC;AAMlC,kBANO,iBAAO,CAMP;;;;;;;;;;;;;ACTT,uCAAkC;AAShC,iBATO,eAAM,CASP;AANR,6CAA6C;AAO3C,sBAPO,0BAAW,CAOP;AANb,uCAAkC;AAOhC,iBAPO,eAAM,CAOP;AALR,kCAAwB;;;;;;;;;;;;;ACDxB,mCAA6B;;;;;;;;;;ACL7B,+DAA8E;AAU5E,qCAVO,2DAA0B,CAUP;AAT5B,sDAA6D;AAQ3D,6BARO,0CAAkB,CAQP;AAPpB,uDAA+D;AAS7D,8BATO,4CAAmB,CASP;AARrB,iDAAoD;AASlD,yBATO,iCAAc,CASP;AARhB,yDAAmE;AAIjE,gCAJO,gDAAqB,CAIP;AAHvB,6DAA0E;AAQxE,mCARO,uDAAwB,CAQP;;;;;;;;;;ACb1B,2CAAgD;AAI9C,2BAJO,6BAAgB,CAIP;AAHlB,0CAAyC;AAIvC,qBAJO,sBAAU,CAIP","file":"index.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"normalized-db\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"normalized-db\"] = factory();\n\telse\n\t\troot[\"normalized-db\"] = factory();\n})(this, function() {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 62);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 2133b3a22b330810d927","(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"normalized-db\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"normalized-db\"] = factory();\n\telse\n\t\troot[\"normalized-db\"] = factory();\n})(this, function() {\nreturn /******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId]) {\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/ \t\t}\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\ti: moduleId,\n/******/ \t\t\tl: false,\n/******/ \t\t\texports: {}\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.l = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// define getter function for harmony exports\n/******/ \t__webpack_require__.d = function(exports, name, getter) {\n/******/ \t\tif(!__webpack_require__.o(exports, name)) {\n/******/ \t\t\tObject.defineProperty(exports, name, {\n/******/ \t\t\t\tconfigurable: false,\n/******/ \t\t\t\tenumerable: true,\n/******/ \t\t\t\tget: getter\n/******/ \t\t\t});\n/******/ \t\t}\n/******/ \t};\n/******/\n/******/ \t// getDefaultExport function for compatibility with non-harmony modules\n/******/ \t__webpack_require__.n = function(module) {\n/******/ \t\tvar getter = module && module.__esModule ?\n/******/ \t\t\tfunction getDefault() { return module['default']; } :\n/******/ \t\t\tfunction getModuleExports() { return module; };\n/******/ \t\t__webpack_require__.d(getter, 'a', getter);\n/******/ \t\treturn getter;\n/******/ \t};\n/******/\n/******/ \t// Object.prototype.hasOwnProperty.call\n/******/ \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(__webpack_require__.s = 7);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", { value: true });\nfunction isNull(object) {\n    return typeof object === 'undefined' || object === null;\n}\nexports.isNull = isNull;\nfunction isObject(object) {\n    return !isNull(object) && typeof object === 'object';\n}\nexports.isObject = isObject;\n\n\n/***/ }),\n/* 1 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar depth_1 = __webpack_require__(17);\nexports.Depth = depth_1.Depth;\nvar log_mode_enum_1 = __webpack_require__(18);\nexports.LogMode = log_mode_enum_1.LogMode;\n\n\n/***/ }),\n/* 2 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar model_1 = __webpack_require__(1);\nvar StoreLogBuilder = (function () {\n    function StoreLogBuilder(mode, eventSelection, keys) {\n        this.mode = mode;\n        this.eventSelection = eventSelection;\n        this.keys = Array.isArray(keys) ? keys : [];\n    }\n    StoreLogBuilder.prototype.setMode = function (value) {\n        this.mode = value;\n        return this;\n    };\n    StoreLogBuilder.prototype.setEventSelection = function (value) {\n        this.eventSelection = value;\n        return this;\n    };\n    StoreLogBuilder.prototype.addKey = function (value) {\n        if (Array.isArray(value)) {\n            (_a = this.keys).push.apply(_a, value);\n        }\n        else {\n            this.keys.push(value);\n        }\n        return this;\n        var _a;\n    };\n    StoreLogBuilder.prototype.build = function () {\n        var config = { mode: this.mode || model_1.LogMode.Disabled };\n        if (this.eventSelection) {\n            config.eventSelection = this.eventSelection;\n        }\n        if (this.keys && this.keys.length > 0) {\n            config.keys = this.keys;\n        }\n        return config;\n    };\n    return StoreLogBuilder;\n}());\nexports.StoreLogBuilder = StoreLogBuilder;\n\n\n/***/ }),\n/* 3 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar deep_clone_1 = __webpack_require__(14);\nexports.deepClone = deep_clone_1.deepClone;\nvar object_1 = __webpack_require__(0);\nexports.isNull = object_1.isNull;\nexports.isObject = object_1.isObject;\nvar queue_1 = __webpack_require__(15);\nexports.Queue = queue_1.Queue;\nvar refs_1 = __webpack_require__(16);\nexports.RefsUtility = refs_1.RefsUtility;\n\n\n/***/ }),\n/* 4 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar utility_1 = __webpack_require__(3);\nvar store_log_builder_1 = __webpack_require__(2);\nvar schema_log_config_1 = __webpack_require__(5);\nvar Schema = (function () {\n    function Schema(userConfig) {\n        var _this = this;\n        this.config = {};\n        this.userConfig = utility_1.deepClone(userConfig);\n        this.initDefaults();\n        var keys = Object.keys(this.userConfig);\n        keys.filter(function (type) { return !type.startsWith('_'); })\n            .forEach(function (type) { return _this.config[type] = _this.expandSchemaForType(type); });\n        this.logConfig = new schema_log_config_1.SchemaLogConfig(this);\n    }\n    Schema.prototype.getLogConfig = function () {\n        return this.logConfig;\n    };\n    Schema.prototype.hasType = function (type) {\n        return type in this.config;\n    };\n    Schema.prototype.getTypes = function () {\n        return Object.keys(this.config);\n    };\n    Schema.prototype.getConfig = function (type) {\n        if (this.hasType(type)) {\n            return this.config[type];\n        }\n        else {\n            this.onNoSchemaFound(type);\n        }\n    };\n    Schema.prototype.getTargetItem = function (type, field) {\n        var config = this.getConfig(type);\n        if (field in config.targets) {\n            return config.targets[field];\n        }\n        else {\n            return null;\n        }\n    };\n    Schema.prototype.getTargetConfig = function (type, field) {\n        var config = this.getConfig(type);\n        if (field in config.targets) {\n            return this.getConfig(config.targets[field].type);\n        }\n        else {\n            this.onNoSchemaFound(type + '.' + field);\n        }\n    };\n    Schema.prototype.toString = function () {\n        return JSON.stringify(this.config);\n    };\n    Schema.prototype.initDefaults = function () {\n        if (Schema.TYPE_DEFAULTS in this.userConfig) {\n            if (typeof this.userConfig._defaults !== 'object') {\n                throw new Error('Defaults must be an instance of `IStoreConfig`');\n            }\n            this.userConfig._defaults.autoKey = this.userConfig._defaults.autoKey === true;\n            if (!('targets' in this.userConfig._defaults)) {\n                this.userConfig._defaults.targets = {};\n            }\n        }\n        else {\n            this.userConfig._defaults = {\n                autoKey: false,\n                targets: {}\n            };\n        }\n    };\n    Schema.prototype.expandSchemaForType = function (type) {\n        if (type in this.userConfig && this.userConfig[type] !== false) {\n            var typeSchema = this.userConfig[type];\n            if (type === Schema.TYPE_DEFAULTS) {\n                var defaults = this.userConfig[Schema.TYPE_DEFAULTS] || {};\n                if (defaults.targets) {\n                    defaults.targets = this.expandTargets(defaults.targets);\n                }\n                if (!defaults.logging) {\n                    defaults.logging = new store_log_builder_1.StoreLogBuilder().build();\n                }\n                return utility_1.deepClone(defaults);\n            }\n            else if (typeSchema === true) {\n                return Object.assign(this.expandSchemaForType(Schema.TYPE_DEFAULTS), { type: type });\n            }\n            else if (typeof typeSchema === 'string') {\n                return Object.assign(utility_1.deepClone(this.expandSchemaForType(typeSchema)), { type: type });\n            }\n            else if (typeof typeSchema === 'object') {\n                var parentSchema = this.expandSchemaForType(typeSchema.parent || Schema.TYPE_DEFAULTS);\n                return this.mergeConfigs(type, typeSchema, parentSchema);\n            }\n            else {\n                throw new Error('Schema for type \\'' + type + '\\' is invalid');\n            }\n        }\n        else {\n            this.onNoSchemaFound(type);\n        }\n    };\n    Schema.prototype.mergeConfigs = function (type, typeConfig, parent) {\n        var autoKey = utility_1.isNull(typeConfig.autoKey || null) ? parent.autoKey : typeConfig.autoKey;\n        var targets = Object.assign(parent.targets, typeConfig.targets);\n        var logging = Object.assign(parent.logging, typeConfig.logging);\n        return {\n            type: type,\n            key: typeConfig.key || parent.key,\n            autoKey: autoKey || false,\n            targets: this.expandTargets(targets),\n            logging: logging\n        };\n    };\n    Schema.prototype.expandTargets = function (targetConfig) {\n        var result = {};\n        Object.keys(targetConfig).forEach(function (field) {\n            var item = targetConfig[field];\n            result[field] = typeof item === 'string'\n                ? { type: item }\n                : item;\n        });\n        return result;\n    };\n    Schema.prototype.onNoSchemaFound = function (type) {\n        throw new Error('No config found for type \\'' + type + '\\'');\n    };\n    Schema.TYPE_DEFAULTS = '_defaults';\n    return Schema;\n}());\nexports.Schema = Schema;\n\n\n/***/ }),\n/* 5 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar model_1 = __webpack_require__(1);\nvar object_1 = __webpack_require__(0);\nvar store_log_builder_1 = __webpack_require__(2);\nvar SchemaLogConfig = (function () {\n    function SchemaLogConfig(_schema) {\n        this._schema = _schema;\n    }\n    SchemaLogConfig.prototype.getConfig = function (type, orDefault) {\n        var config = orDefault || new store_log_builder_1.StoreLogBuilder().build();\n        if (this._schema.hasType(type)) {\n            config = Object.assign(config, this._schema.getConfig(type).logging);\n        }\n        return config;\n    };\n    SchemaLogConfig.prototype.getLogMode = function (type, orDefault) {\n        if (orDefault === void 0) { orDefault = model_1.LogMode.Disabled; }\n        return this._schema.hasType(type)\n            ? this._schema.getConfig(type).logging.mode\n            : orDefault;\n    };\n    SchemaLogConfig.prototype.getEventTypes = function (type, orDefault) {\n        var types;\n        if (this._schema.hasType(type)) {\n            var eventSelection = this._schema.getConfig(type).logging.eventSelection;\n            types = Array.isArray(eventSelection) ? eventSelection : [eventSelection];\n        }\n        return types && types.length > 0 ? types : orDefault;\n    };\n    SchemaLogConfig.prototype.getKeys = function (type, orDefault) {\n        var keys;\n        if (this._schema.hasType(type)) {\n            keys = this._schema.getConfig(type).logging.keys;\n        }\n        return keys && keys.length > 0 ? keys : orDefault;\n    };\n    SchemaLogConfig.prototype.isLoggingEnabled = function (type, eventType, key) {\n        var isEnabled = this._schema.hasType(type);\n        if (isEnabled) {\n            var logConfig = this._schema.getConfig(type).logging;\n            isEnabled = logConfig.mode !== model_1.LogMode.Disabled;\n            if (isEnabled && eventType && logConfig.eventSelection) {\n                isEnabled = Array.isArray(logConfig.eventSelection)\n                    ? logConfig.eventSelection.length === 0 || logConfig.eventSelection.indexOf(eventType) >= 0\n                    : logConfig.eventSelection === eventType;\n            }\n            if (isEnabled && !object_1.isNull(key) && logConfig.keys && logConfig.keys.length > 0) {\n                isEnabled = logConfig.keys.indexOf(key) >= 0;\n            }\n        }\n        return isEnabled;\n    };\n    return SchemaLogConfig;\n}());\nexports.SchemaLogConfig = SchemaLogConfig;\n\n\n/***/ }),\n/* 6 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar object_1 = __webpack_require__(0);\nvar StoreBuilder = (function () {\n    function StoreBuilder(parent, key, autoKey, targets, logging) {\n        this.parent = parent;\n        this.key = key;\n        this.autoKey = autoKey;\n        this.targets = targets;\n        this.logging = logging;\n    }\n    StoreBuilder.prototype.setKey = function (key) {\n        this.key = key;\n        return this;\n    };\n    StoreBuilder.prototype.setAutoKey = function (autoKey) {\n        this.autoKey = autoKey;\n        return this;\n    };\n    StoreBuilder.prototype.setParent = function (parent) {\n        this.parent = parent;\n        return this;\n    };\n    StoreBuilder.prototype.hasTarget = function (field) {\n        return field in this.targets;\n    };\n    StoreBuilder.prototype.setTarget = function (field, type, cascadeRemoval) {\n        if (cascadeRemoval === void 0) { cascadeRemoval = false; }\n        var config = { type: type };\n        if (cascadeRemoval) {\n            config.cascadeRemoval = true;\n        }\n        if (this.targets) {\n            this.targets[field] = config;\n        }\n        else {\n            this.targets = (_a = {}, _a[field] = config, _a);\n        }\n        return this;\n        var _a;\n    };\n    StoreBuilder.prototype.setArrayTarget = function (field, type, cascadeRemoval) {\n        if (cascadeRemoval === void 0) { cascadeRemoval = false; }\n        this.setTarget(field, type, cascadeRemoval);\n        this.targets[field].isArray = true;\n        return this;\n    };\n    StoreBuilder.prototype.removeTarget = function (field) {\n        if (this.hasTarget(field)) {\n            delete this.targets[field];\n        }\n        return this;\n    };\n    StoreBuilder.prototype.setLogging = function (logging) {\n        this.logging = logging;\n        return this;\n    };\n    Object.defineProperty(StoreBuilder.prototype, \"build\", {\n        get: function () {\n            if (this.hasConfiguration) {\n                var result = {};\n                if (this.key) {\n                    result.key = this.key;\n                }\n                if (!object_1.isNull(this.autoKey)) {\n                    result.autoKey = this.autoKey;\n                }\n                if (this.parent) {\n                    result.parent = this.parent;\n                }\n                if (this.targets) {\n                    result.targets = this.targets;\n                }\n                if (this.logging) {\n                    result.logging = this.logging;\n                }\n                return result;\n            }\n            else if (this.parent) {\n                return this.parent;\n            }\n            else {\n                return true;\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(StoreBuilder.prototype, \"hasConfiguration\", {\n        get: function () {\n            return !object_1.isNull(this.key) || !object_1.isNull(this.autoKey) || this.hasTargets || !object_1.isNull(this.logging);\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(StoreBuilder.prototype, \"hasTargets\", {\n        get: function () {\n            return !object_1.isNull(this.targets) && Object.keys(this.targets).length > 0;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    return StoreBuilder;\n}());\nexports.StoreBuilder = StoreBuilder;\n\n\n/***/ }),\n/* 7 */\n/***/ (function(module, exports, __webpack_require__) {\n\nmodule.exports = __webpack_require__(8);\n\n\n/***/ }),\n/* 8 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nfunction __export(m) {\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\n}\nObject.defineProperty(exports, \"__esModule\", { value: true });\n__export(__webpack_require__(9));\n__export(__webpack_require__(3));\n__export(__webpack_require__(1));\n__export(__webpack_require__(19));\n\n\n/***/ }),\n/* 9 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar invalid_type_error_1 = __webpack_require__(10);\nexports.InvalidTypeError = invalid_type_error_1.InvalidTypeError;\nvar missing_key_error_1 = __webpack_require__(11);\nexports.MissingKeyError = missing_key_error_1.MissingKeyError;\nvar not_found_error_1 = __webpack_require__(12);\nexports.NotFoundError = not_found_error_1.NotFoundError;\nvar type_mismatch_error_1 = __webpack_require__(13);\nexports.TypeMismatchError = type_mismatch_error_1.TypeMismatchError;\n\n\n/***/ }),\n/* 10 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar InvalidTypeError = (function (_super) {\n    __extends(InvalidTypeError, _super);\n    function InvalidTypeError(type) {\n        return _super.call(this, \"Type \\\"\" + type + \"\\\" is not configured\") || this;\n    }\n    return InvalidTypeError;\n}(Error));\nexports.InvalidTypeError = InvalidTypeError;\n\n\n/***/ }),\n/* 11 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar MissingKeyError = (function (_super) {\n    __extends(MissingKeyError, _super);\n    function MissingKeyError(type, keyField) {\n        return _super.call(this, \"Key \" + keyField + \" is missing in object of type \" + type) || this;\n    }\n    return MissingKeyError;\n}(Error));\nexports.MissingKeyError = MissingKeyError;\n\n\n/***/ }),\n/* 12 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar NotFoundError = (function (_super) {\n    __extends(NotFoundError, _super);\n    function NotFoundError(type, key) {\n        return _super.call(this, \"Could not find \\\"\" + type + \"\\\" with key \\\"\" + key + \"\\\"\") || this;\n    }\n    return NotFoundError;\n}(Error));\nexports.NotFoundError = NotFoundError;\n\n\n/***/ }),\n/* 13 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar TypeMismatchError = (function (_super) {\n    __extends(TypeMismatchError, _super);\n    function TypeMismatchError(parentType, parentField, expectedArray) {\n        return _super.call(this, \"\\\"\" + parentType + \".\" + parentField + \"\\\" is expected to be an \" + (expectedArray\n            ? 'array'\n            : 'object') + \" but got \" + (expectedArray ? 'object' : 'array') + \".\") || this;\n    }\n    return TypeMismatchError;\n}(Error));\nexports.TypeMismatchError = TypeMismatchError;\n\n\n/***/ }),\n/* 14 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", { value: true });\nfunction deepClone(object) {\n    var ctor = object ? object.constructor : null;\n    if (object === null || typeof object !== 'object' || ctor === ArrayBuffer || ctor === Blob || ctor === File) {\n        return object;\n    }\n    if (ctor === Date || ctor === RegExp || ctor === Function || ctor === JSON ||\n        ctor === String || ctor === Number || ctor === Boolean ||\n        ctor === Set || ctor === Map || ctor === WeakMap || ctor === WeakSet) {\n        return new ctor(object);\n    }\n    var result = new ctor();\n    Object.keys(object)\n        .forEach(function (key) { return result[key] = deepClone(object[key]); });\n    return result;\n}\nexports.deepClone = deepClone;\n\n\n/***/ }),\n/* 15 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Queue = (function () {\n    function Queue(data) {\n        if (data === void 0) { data = []; }\n        this.data = data;\n    }\n    Object.defineProperty(Queue.prototype, \"length\", {\n        get: function () {\n            return this.data.length;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Queue.prototype, \"isEmpty\", {\n        get: function () {\n            return this.length === 0;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Queue.prototype.enqueue = function (item) {\n        this.data.push(item);\n    };\n    Queue.prototype.dequeue = function () {\n        return this.data.shift();\n    };\n    Queue.prototype.clear = function () {\n        this.data.splice(0, this.length);\n    };\n    return Queue;\n}());\nexports.Queue = Queue;\n\n\n/***/ }),\n/* 16 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar RefsUtility = (function () {\n    function RefsUtility() {\n    }\n    RefsUtility.has = function (item, type) {\n        return '_refs' in item && type in item._refs && item._refs[type].size > 0;\n    };\n    RefsUtility.hasKey = function (item, type, key) {\n        return this.has(item, type) && item._refs[type].has(key);\n    };\n    RefsUtility.iterator = function (item, type) {\n        return this.has(item, type) ? item._refs[type].values() : {\n            next: function () {\n                return { value: null, done: true };\n            }\n        };\n    };\n    RefsUtility.getAll = function (item, type) {\n        return this.has(item, type) ? Array.from(item._refs[type]) : [];\n    };\n    RefsUtility.first = function (item, type) {\n        return this.has(item, type) ? (item._refs[type].values().next().value) : null;\n    };\n    return RefsUtility;\n}());\nexports.RefsUtility = RefsUtility;\n\n\n/***/ }),\n/* 17 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Depth = (function () {\n    function Depth() {\n    }\n    return Depth;\n}());\nexports.Depth = Depth;\n\n\n/***/ }),\n/* 18 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar LogMode;\n(function (LogMode) {\n    LogMode[\"Disabled\"] = \"disabled\";\n    LogMode[\"Simple\"] = \"simple\";\n    LogMode[\"Full\"] = \"full\";\n})(LogMode = exports.LogMode || (exports.LogMode = {}));\n\n\n/***/ }),\n/* 19 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nfunction __export(m) {\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\n}\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar schema_1 = __webpack_require__(4);\nexports.Schema = schema_1.Schema;\nvar schema_log_config_1 = __webpack_require__(5);\nexports.SchemaLogConfig = schema_log_config_1.SchemaLogConfig;\n__export(__webpack_require__(20));\n\n\n/***/ }),\n/* 20 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar schema_builder_1 = __webpack_require__(21);\nexports.SchemaBuilder = schema_builder_1.SchemaBuilder;\nvar store_builder_1 = __webpack_require__(6);\nexports.StoreBuilder = store_builder_1.StoreBuilder;\nvar store_log_builder_1 = __webpack_require__(2);\nexports.StoreLogBuilder = store_log_builder_1.StoreLogBuilder;\n\n\n/***/ }),\n/* 21 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar schema_1 = __webpack_require__(4);\nvar store_builder_1 = __webpack_require__(6);\nvar SchemaBuilder = (function () {\n    function SchemaBuilder() {\n        this.defaultStore = new store_builder_1.StoreBuilder();\n        this.schema = (_a = {}, _a[schema_1.Schema.TYPE_DEFAULTS] = this.defaultStore, _a);\n        var _a;\n    }\n    Object.defineProperty(SchemaBuilder.prototype, \"getDefaultStore\", {\n        get: function () {\n            return this.defaultStore;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    SchemaBuilder.prototype.setDefaultKey = function (key) {\n        this.defaultStore.setKey(key);\n        return this;\n    };\n    SchemaBuilder.prototype.setDefaultAutoKey = function (autoKey) {\n        this.defaultStore.setAutoKey(autoKey);\n        return this;\n    };\n    SchemaBuilder.prototype.setDefaultTarget = function (field, type, cascadeRemoval) {\n        if (cascadeRemoval === void 0) { cascadeRemoval = false; }\n        this.defaultStore.setTarget(field, type, cascadeRemoval);\n        return this;\n    };\n    SchemaBuilder.prototype.setDefaultArrayTarget = function (field, type, cascadeRemoval) {\n        if (cascadeRemoval === void 0) { cascadeRemoval = false; }\n        this.defaultStore.setArrayTarget(field, type, cascadeRemoval);\n        return this;\n    };\n    SchemaBuilder.prototype.hasStore = function (type) {\n        return type in this.schema;\n    };\n    SchemaBuilder.prototype.getStore = function (type) {\n        if (this.hasStore(type)) {\n            return this.schema[type];\n        }\n        else {\n            throw new Error('No prefix \\'' + type + '\\' is defined');\n        }\n    };\n    SchemaBuilder.prototype.setStore = function (type, parent) {\n        if (parent === void 0) { parent = null; }\n        var storeBuilder = new store_builder_1.StoreBuilder(parent);\n        this.schema[type] = storeBuilder;\n        return storeBuilder;\n    };\n    SchemaBuilder.prototype.setAbstractStore = function (type, parent) {\n        if (parent === void 0) { parent = null; }\n        return this.setStore('_' + type, parent);\n    };\n    SchemaBuilder.prototype.getAbstractStore = function (type) {\n        return this.getStore('_' + type);\n    };\n    SchemaBuilder.prototype.removeStore = function (type) {\n        if (this.hasStore(type)) {\n            delete this.schema[type];\n        }\n        return this;\n    };\n    Object.defineProperty(SchemaBuilder.prototype, \"build\", {\n        get: function () {\n            var _this = this;\n            return Object.keys(this.schema)\n                .filter(function (type) { return _this.schema[type] instanceof store_builder_1.StoreBuilder; })\n                .reduce(function (result, type) {\n                result[type] = _this.schema[type].build;\n                return result;\n            }, {});\n        },\n        enumerable: true,\n        configurable: true\n    });\n    return SchemaBuilder;\n}());\nexports.SchemaBuilder = SchemaBuilder;\n\n\n/***/ })\n/******/ ]);\n});\n//# sourceMappingURL=index.js.map\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/@normalized-db/core/lib/index.js\n// module id = 0\n// module chunks = 0","import { BaseOptions } from '../base-options';\n\nexport abstract class BaseOptionsBuilder<Options extends BaseOptions> {\n\n  protected _autoCloseContext: boolean;\n\n  public autoCloseContext(value: boolean): this {\n    this._autoCloseContext = value;\n    return this;\n  }\n\n  public abstract build(): Options;\n\n  protected buildBase(): BaseOptions {\n    return { autoCloseContext: this._autoCloseContext };\n  }\n\n  protected assignBase(options: Options): Options {\n    return Object.assign(options, this.buildBase());\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/data-store/options/builder/base-options.builder.ts","export class EmptyInputError extends Error {\n\n  constructor(commandType: 'create' | 'update' | 'set' | 'put' | 'remove') {\n    super(`Cannot run a ${commandType}-command with a null-value`);\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/error/empty-input-error.ts","import { EventType, ValidKey } from '@normalized-db/core';\nimport { DataStoreTypes } from '../model/data-store-types';\n\nexport abstract class BaseEvent<Types extends DataStoreTypes, T> {\n\n  public readonly time = new Date();\n\n  constructor(public readonly eventType: EventType,\n              public readonly dataStoreType: Types,\n              public readonly item: T,\n              public readonly itemKey: ValidKey) {\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/event/base-event.ts","import { LogMode } from '@normalized-db/core';\nimport { UpgradeDB } from 'idb';\nimport { IdbContext } from '../../context/idb-context/idb-context';\nimport { BaseEvent } from '../../event/base-event';\nimport { OnDataChanged } from '../../event/utility/on-data-changed';\nimport { DataStoreTypes } from '../../model/data-store-types';\nimport { ClearLogsOptions } from '../clear-command/clear-logs-options';\nimport { Logger } from '../logger';\nimport { LogEntry } from '../model/log-entry';\nimport { LogQueryConfig } from '../query/log-query-config';\nimport { LogQueryRunner } from '../query/log-query-runner';\nimport { IdbClearLogsCommand } from './idb-clear-logs-command';\nimport { IdbLogQueryRunner } from './idb-log-query-runner';\n\nexport class IdbLogger<Types extends DataStoreTypes> extends Logger<Types, IdbContext<Types>> implements OnDataChanged {\n\n  public static readonly OBJECT_STORE = '_logs';\n\n  // region index names\n\n  public static readonly IDX_TIME = 'idx_time';\n  public static readonly IDX_ACTION = 'idx_action';\n  public static readonly IDX_TYPE = 'idx_type';\n  public static readonly IDX_KEY = 'idx_key';\n\n  // endregion\n\n  constructor(idbContext: IdbContext<Types>) {\n    super(idbContext);\n  }\n\n  public onUpgradeNeeded(upgradeDb: UpgradeDB): void {\n    if (!upgradeDb.objectStoreNames.contains(IdbLogger.OBJECT_STORE)) {\n      const logStore = upgradeDb.createObjectStore(IdbLogger.OBJECT_STORE, { keyPath: 'id', autoIncrement: true });\n      logStore.createIndex(IdbLogger.IDX_TIME, 'time');\n      logStore.createIndex(IdbLogger.IDX_ACTION, 'action');\n      logStore.createIndex(IdbLogger.IDX_TYPE, 'type');\n      logStore.createIndex(IdbLogger.IDX_KEY, 'key');\n    }\n  }\n\n  public queryRunner(config: LogQueryConfig): LogQueryRunner<Types> {\n    return new IdbLogQueryRunner<Types>(this._context, config);\n  }\n\n  // TODO auto-close context - other writing commands still could need the db-connection\n  public async ndbOnDataChanged(event: BaseEvent<Types, any>): Promise<void> {\n    if (this.isLoggingEnabled(event.dataStoreType, event)) {\n      const transaction = await this._context.write(IdbLogger.OBJECT_STORE);\n      const logStore = transaction.objectStore(IdbLogger.OBJECT_STORE);\n      const includeData = this.getLogMode(event.dataStoreType) === LogMode.Full;\n      await logStore.put(new LogEntry<Types>(event, includeData));\n    }\n  }\n\n  public async clear(options?: ClearLogsOptions<Types>): Promise<boolean> {\n    const cmd = new IdbClearLogsCommand<Types>(this._context);\n    const success = await cmd.execute(options);\n    this.autoCloseContext(options);\n    return success;\n  }\n\n  private async autoCloseContext(options: ClearLogsOptions<Types>): Promise<void> {\n    if (options && options.autoCloseContext) {\n      await this._context.close();\n    }\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/logging/idb-logging/idb-logger.ts","import { IdbContext } from '../../context/idb-context/idb-context';\nimport { BaseCommand } from '../base-command';\nimport { Command } from '../command';\n\nexport abstract class IdbBaseCommand<T> extends BaseCommand<T, IdbContext<any>> implements Command<T> {\n\n  constructor(context: IdbContext<any>, type: string, typeIsOptional = false) {\n    super(context, type, typeIsOptional);\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/command/idb-command/idb-base-command.ts","import { isNull, NdbDocument, NotFoundError, TypeMismatchError, ValidKey } from '@normalized-db/core';\nimport { Cursor, ObjectStore, Transaction } from 'idb';\nimport { IdbContext } from '../../context/idb-context/idb-context';\nimport { CreatedEvent } from '../../event/created-event';\nimport { UpdatedEvent } from '../../event/updated-event';\nimport { Parent } from '../../model/parent';\nimport { RefsWriteUtility } from '../../utility/refs-write';\nimport { IdbBaseCommand } from './idb-base-command';\n\nexport abstract class IdbBaseWriteCommand<T extends NdbDocument> extends IdbBaseCommand<T | T[]> {\n\n  constructor(context: IdbContext<any>, type: string) {\n    super(context, type);\n  }\n\n  /**\n   * @inheritDoc\n   *\n   * @param {T|T[]} data\n   * @param {Parent|Parent[]} parent\n   * @param {boolean} isPartialUpdate\n   * @returns {Promise<boolean>}\n   */\n  public async write(data: T | T[], parent?: Parent | Parent[], isPartialUpdate?: boolean): Promise<boolean> {\n    const normalizedData = await this._context.normalizer().apply(this._type, data);\n    const involvedTypes = [...this.getTypes(normalizedData), ...this.getTypes(normalizedData)];\n    if (parent) {\n      if (Array.isArray(parent)) {\n        parent.forEach(p => involvedTypes.push(p.type));\n      } else {\n        involvedTypes.push(parent.type);\n      }\n    }\n\n    const transaction = await this._context.write(involvedTypes);\n    try {\n      const newItemKeys: ValidKey[] = [];\n      await Promise.all(Object.keys(normalizedData).map(async type => {\n        const config = this.schema.getConfig(type);\n        const objectStore = transaction.objectStore(type);\n        await Promise.all(normalizedData[type].map(async item => {\n          if (parent) {\n            RefsWriteUtility.add(item, parent);\n          }\n\n          let key = this.getKey(item, config, true);\n          if (isNull(key)) {\n            await objectStore.put(item);\n            item[config.key] = key = await this.getLatestKey(objectStore);\n            this._eventQueue.enqueue(new CreatedEvent(type, item, key, type === this._type ? parent : null));\n          } else {\n            const cursor = await objectStore.openCursor(key);\n            if (cursor && cursor.value) {\n              const mergedItem = await this.updateCursor(cursor, item, isPartialUpdate);\n              this._eventQueue.enqueue(new UpdatedEvent(type, mergedItem, key));\n            } else {\n              await objectStore.put(item);\n              this._eventQueue.enqueue(new CreatedEvent(type, item, key, type === this._type ? parent : null));\n            }\n          }\n\n          if (type === this._type) {\n            newItemKeys.push(key);\n          }\n        }));\n      }));\n\n      if (parent) {\n        await this.addToParents(transaction, parent, newItemKeys);\n      }\n    } catch (e) {\n      console.error(e);\n      try {\n        transaction.abort();\n      } catch (e2) {\n        console.error(e2);\n      }\n      return false;\n    }\n\n    this.onSuccess();\n    return true;\n  }\n\n  /**\n   * Merge each field of `newItem` into the cursor's current value so an update is possible field by field and not only\n   * entire objects. Furthermore the `_refs`-field created during normalization must be merged.\n   *\n   * @param {Cursor} cursor\n   * @param {NdbDocument} newItem\n   * @param {boolean} isPartialUpdate\n   * @returns {Promise<object>}\n   */\n  private async updateCursor(cursor: Cursor, newItem: NdbDocument, isPartialUpdate: boolean): Promise<object> {\n    let mergedItem: NdbDocument;\n    if (isPartialUpdate) {\n      mergedItem = cursor.value;\n      Object.keys(newItem)\n          .filter(field => field !== '_refs')\n          .forEach(field => mergedItem[field] = newItem[field]);\n    } else {\n      mergedItem = newItem;\n    }\n\n    if ((cursor.value._refs && Object.keys(cursor.value._refs).length > 0) ||\n        (newItem._refs && Object.keys(newItem._refs).length > 0)) {\n      const mergedRefs: { [type: string]: Set<ValidKey> } = cursor.value._refs || {};\n      if (newItem._refs) {\n        Object.keys(newItem._refs)\n            .forEach(refType => {\n              if (refType in mergedRefs) {\n                const it: Iterator<ValidKey> = newItem._refs[refType].values();\n                let current = it.next();\n                while (!current.done) {\n                  mergedRefs[refType].add(current.value);\n                  current = it.next();\n                }\n              } else {\n                mergedRefs[refType] = newItem._refs[refType];\n              }\n            });\n      }\n\n      Object.assign(mergedItem, { _refs: mergedRefs });\n    }\n\n    await cursor.update(mergedItem);\n    return mergedItem;\n  }\n\n  private async addToParents(transaction: Transaction, parent: Parent | Parent[], keys: ValidKey[]): Promise<void> {\n    if (keys && keys.length === 0) {\n      return;\n    }\n\n    if (Array.isArray(parent)) {\n      await Promise.all(parent.map(p => this.addToParent(transaction, p, keys)));\n    } else {\n      await this.addToParent(transaction, parent, keys);\n    }\n  }\n\n  private async addToParent(transaction: Transaction, parent: Parent, keys: ValidKey[]): Promise<void> {\n    const parentItem = await transaction.objectStore(parent.type).get(parent.key);\n    if (isNull(parentItem)) {\n      throw new NotFoundError(parent.type, parent.key);\n    }\n\n    const parentTargets = this.schema.getConfig(parent.type).targets;\n    if (!parentTargets || !(parent.field in parentTargets) || parentTargets[parent.field].type !== this._type) {\n      throw new Error(`${parent.type}.${parent.field} is not configured as target for ${this._type}`);\n    }\n\n    return await this.addKeysToParentsHelper(\n        transaction,\n        parent,\n        parentItem,\n        keys\n    );\n  }\n\n  private async addKeysToParentsHelper(transaction: Transaction,\n                                       parent: Parent,\n                                       parentItem: NdbDocument,\n                                       keys: ValidKey[]): Promise<void> {\n    let parentChanged = false;\n    const fieldValue = parentItem[parent.field];\n    const isArrayExpected = this.schema.getConfig(parent.type).targets[parent.field].isArray;\n    if (isArrayExpected) {\n      if (isNull(fieldValue)) {\n        parentItem[parent.field] = keys;\n        parentChanged = true;\n      } else if (Array.isArray(fieldValue)) {\n        keys.forEach(itemKey => {\n          const index = fieldValue.findIndex(key => key === itemKey);\n          if (index < 0) {\n            fieldValue.push(itemKey);\n            parentChanged = true;\n          }\n        });\n      } else {\n        throw new TypeMismatchError(parent.type, parent.field, true);\n      }\n    } else {\n      if (keys.length > 1) {\n        throw new Error('Cannot add multiple children to a non-array parent field');\n      }\n\n      const newChildKey = keys.shift();\n      if (fieldValue !== newChildKey) {\n        if (!isNull(fieldValue)) {\n          if (Array.isArray(fieldValue)) {\n            throw new TypeMismatchError(parent.type, parent.field, false);\n          }\n\n          const oldChildCursor = await transaction.objectStore(this._type).openCursor(fieldValue);\n          if (oldChildCursor) {\n            const oldChild = oldChildCursor.value;\n            if ('_refs' in oldChild && parent.type in oldChild._refs) {\n              oldChild._refs[parent.type].delete(parent.key);\n              await oldChildCursor.update(oldChild);\n            }\n          }\n        }\n\n        parentItem[parent.field] = newChildKey;\n        parentChanged = true;\n      }\n    }\n\n    if (parentChanged) {\n      await transaction.objectStore(parent.type).put(parentItem);\n    }\n  }\n\n  private async getLatestKey(objectStore: ObjectStore): Promise<ValidKey | null> {\n    const cursor = await objectStore.openCursor(null, 'prevunique');\n    return cursor ? cursor.key as ValidKey : null;\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/command/idb-command/idb-base-write-command.ts","import { ValidKey } from '@normalized-db/core';\n\nexport class Parent {\n\n  /**\n   * @param {string} type Name of the parent's data-store\n   * @param {ValidKey} key Unique key of the parent-object\n   * @param {string} field The field on the parent-object which should be searched for the child-object\n   */\n  constructor(public readonly type: string,\n              public readonly key: ValidKey,\n              public readonly field: string) {\n  }\n\n  public equals(other: Parent): boolean {\n    return other && this.key === other.key && this.field === other.field && this.type === other.type;\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/model/parent.ts","import { InvalidTypeError, ISchema } from '@normalized-db/core';\nimport { Context } from '../context/context';\nimport { QueryConfig } from './model/query-config';\nimport { Queryable } from './queryable';\n\nexport abstract class BaseQuery<Result> implements Queryable<Result> {\n\n  protected _cachedResult?: Result;\n\n  constructor(protected readonly _context: Context<any>,\n              private readonly _autoCloseContext: boolean,\n              protected readonly _type: string) {\n    if (!this.schema.hasType(_type)) {\n      throw new InvalidTypeError(_type);\n    }\n  }\n\n  /**\n   * @{inheritDoc}\n   */\n  public abstract result(noCache?: boolean): Promise<Result>;\n\n  /**\n   * @{inheritDoc}\n   */\n  public async invalidateCachedResult(): Promise<void> {\n    this._cachedResult = null;\n  }\n\n  protected getQueryConfig(): QueryConfig {\n    return { type: this._type };\n  }\n\n  protected get schema(): ISchema {\n    return this._context.schema();\n  }\n\n  protected async autoClose(): Promise<void> {\n    if (this._autoCloseContext) {\n      await this._context.close();\n    }\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/query/base-query.ts","import { isNull, NdbDocument, NotFoundError } from '@normalized-db/core';\nimport { ObjectStore } from 'idb';\nimport { IdbBaseWriteCommand } from './idb-base-write-command';\n\nexport abstract class IdbBaseUpdateCommand<T extends NdbDocument> extends IdbBaseWriteCommand<T> {\n\n  protected async executeHelper(data: T | T[], isPartialUpdate = false): Promise<boolean> {\n    const objectStore = (await this._context.read(this._type)).objectStore(this._type);\n    if (Array.isArray(data)) {\n      await Promise.all(data.map(item => this.checkExistence(objectStore, item)));\n    } else {\n      await this.checkExistence(objectStore, data);\n    }\n\n    return super.write(data, null, isPartialUpdate);\n  }\n\n  private async checkExistence(objectStore: ObjectStore, item: T): Promise<void> {\n    const key = this.getKey(item);\n    const existingItem = objectStore.get(key);\n    if (isNull(existingItem)) {\n      throw new NotFoundError(this._type, key);\n    }\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/command/idb-command/idb-base-update-command.ts","import { NdbDocument, ValidKey } from '@normalized-db/core';\nimport { DataStoreTypes } from '../model/data-store-types';\nimport { Parent } from '../model/parent';\nimport { BaseEvent } from './base-event';\n\nexport class CreatedEvent<Types extends DataStoreTypes, T extends NdbDocument> extends BaseEvent<Types, T> {\n\n  constructor(type: Types, item: T, itemKey: ValidKey, public readonly parent?: Parent | Parent[]) {\n    super('created', type, item, itemKey);\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/event/created-event.ts","import { NdbDocument, ValidKey } from '@normalized-db/core';\nimport { DataStoreTypes } from '../model/data-store-types';\nimport { Parent } from '../model/parent';\nimport { BaseEvent } from './base-event';\n\nexport class RemovedEvent<Types extends DataStoreTypes, T extends NdbDocument> extends BaseEvent<Types, T> {\n\n  constructor(type: Types, item: T, itemKey: ValidKey, public readonly parent?: Parent) {\n    super('removed', type, item, itemKey);\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/event/removed-event.ts","import { ChildNotFoundError } from './child-not-found-error';\nimport { EmptyInputError } from './empty-input-error';\nimport { EmptyResultError } from './empty-result-error';\nimport { InvalidQueryConfigError } from './invalid-query-config-error';\nimport { InvalidQueryRunnerStatusError } from './invalid-query-runner-status-error';\nimport { ListenerRegisteredError } from './listener-registered-error';\nimport { OrderByInvalidTypeError } from './order-by-invalid-type-error';\nimport { OrderByTypeMismatchError } from './order-by-type-mismatch-error';\nimport { InvalidQueryRunnerRegistration } from './query-runner-registered-error';\nimport { RefNotFoundError } from './ref-not-found-error';\n\nexport {\n  ChildNotFoundError,\n  EmptyInputError,\n  EmptyResultError,\n  InvalidQueryConfigError,\n  InvalidQueryRunnerStatusError,\n  ListenerRegisteredError,\n  OrderByInvalidTypeError,\n  OrderByTypeMismatchError,\n  InvalidQueryRunnerRegistration,\n  RefNotFoundError\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/error/index.ts","import { ISchema, ValidKey } from '@normalized-db/core';\nimport { IDenormalizer } from '@normalized-db/denormalizer';\nimport { IdbContext } from '../../../context/idb-context/index';\nimport { InvalidQueryRunnerStatusError } from '../../../error/index';\nimport { QueryConfig } from '../../model/query-config';\n\nexport abstract class IdbBaseQueryRunner {\n\n  protected readonly _schema: ISchema;\n\n  protected _isRunning = false;\n  protected _denormalizer: IDenormalizer;\n\n  constructor(protected readonly _context: IdbContext<any>,\n              protected readonly _config: QueryConfig) {\n    this.fetchCallback = this.fetchCallback.bind(this);\n    this._schema = this._context.schema();\n  }\n\n  protected start() {\n    if (this._isRunning) {\n      throw new InvalidQueryRunnerStatusError('Query is already running');\n    }\n\n    this._isRunning = true;\n    this._denormalizer = this._context.denormalizerBuilder()\n        .fetchCallback(this.fetchCallback)\n        .build();\n  }\n\n  protected stop() {\n    this._isRunning = false;\n  }\n\n  protected async fetchCallback(type: string, keys: ValidKey | ValidKey[]): Promise<any | any[]> {\n    const objectStore = (await this._context.read(type)).objectStore(type);\n    return await (Array.isArray(keys)\n        ? Promise.all(keys.map(async key => await objectStore.get(key)))\n        : objectStore.get(keys));\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/query/runner/idb-runner/idb-base-query-runner.ts","import { isNull, NdbDocument, NotFoundError, ValidKey } from '@normalized-db/core';\nimport { Transaction } from 'idb';\nimport { ListResult, ListResultBuilder } from '../../list-result/index';\nimport { IdbBaseQueryRunner } from './idb-base-query-runner';\n\nexport abstract class IdbBaseDocumentQueryRunner<Result extends NdbDocument> extends IdbBaseQueryRunner {\n\n  protected _transaction: Transaction;\n\n  /**\n   * Find all items pre-filtered by their primary key. Paging and further filtering will be applied as defined\n   * in the query-config.\n   *\n   * @param {ValidKey[]} keys\n   * @param {string} type\n   * @returns {Promise<ListResult<Result>>}\n   */\n  protected async findAllByKeys(keys: ValidKey[], type = this._config.type): Promise<ListResult<Result>> {\n    if (!this._transaction) {\n      this._transaction = await this._context.read(type);\n    }\n\n    const objectStore = this._transaction.objectStore(type);\n    const items = [];\n    let keyIndex = 0, resultIndex = 0;\n    while (keyIndex < keys.length) {\n      const key = keys[keyIndex];\n      if (isNull(key)) {\n        keyIndex++;\n        continue;\n      }\n\n      const item = await objectStore.get(key);\n      if (isNull(item)) {\n        keyIndex++;\n        continue;\n      }\n\n      let denormalizedData, isValid = true;\n      if (this._config.filter) {\n        if (this._config.filter.requiresDenormalization) {\n          denormalizedData = await this._denormalizer.apply<Result>(type, item, this._config.depth);\n          isValid = await this._config.filter.test(denormalizedData);\n        } else {\n          isValid = await this._config.filter.test(item);\n        }\n      }\n\n      if (isValid) {\n        if (resultIndex >= this._config.offset && items.length < this._config.limit) {\n          if (!denormalizedData) {\n            denormalizedData = await this._denormalizer.apply<Result>(type, item, this._config.depth);\n          }\n\n          items.push(denormalizedData);\n        }\n\n        resultIndex++;\n      }\n\n      keyIndex++;\n    }\n\n    return this.createListResult(items, resultIndex);\n  }\n\n  protected async findByKey(type = this._config.type, key = this._config.singleItem): Promise<Result> {\n    if (!this._transaction) {\n      this._transaction = await this._context.read(type);\n    }\n\n    const item = await this._transaction.objectStore(type).get(key);\n    return item ? await this._denormalizer.apply<Result>(type, item, this._config.depth) : null;\n  }\n\n  /**\n   * Find the given parent and use the value of the specified field as base data set for applying the query\n   *\n   * @returns {Promise<Result|ListResult<Result>>}\n   */\n  protected async findInParent(): Promise<Result | ListResult<Result>> {\n    const { parent, keys, singleItem: key } = this._config;\n    const childConfig = this._schema.getTargetConfig(parent.type, parent.field);\n\n    this._transaction = await this._context.read([parent.type, childConfig.type]);\n    const parentObj = await this._transaction.objectStore(parent.type).get(parent.key);\n    if (!parentObj) {\n      throw new NotFoundError(parent.type, parent.key);\n    }\n\n    if (parent.field in parentObj) {\n      const fieldValue = parentObj[parent.field];\n      const fieldIsArray = Array.isArray(fieldValue);\n\n      if (isNull(key)) {\n        if (keys) {\n          if (fieldIsArray) {\n            const filteredChildKeys = fieldValue.filter(k => keys.findIndex(filterKey => filterKey === k) >= 0);\n            return await this.findAllByKeys(filteredChildKeys, childConfig.type);\n          } else if (keys.findIndex(filterKey => filterKey === fieldValue) >= 0) {\n            return await this.findByKey(childConfig.type, fieldValue);\n          }\n        } else {\n          return await fieldIsArray\n              ? this.findAllByKeys(fieldValue, childConfig.type)\n              : this.findByKey(childConfig.type, key);\n        }\n      } else {\n        if ((!fieldIsArray && fieldValue === key) || (fieldIsArray && fieldValue.indexOf(k => k === key) >= 0)) {\n          return await this.findByKey(childConfig.type, key);\n        }\n      }\n    }\n\n    return null;\n  }\n\n  protected createListResult(items: Result[], total: number): ListResult<Result> {\n    return new ListResultBuilder<Result>()\n        .items(items)\n        .total(total)\n        .offset(this._config.offset)\n        .limit(this._config.limit)\n        .build();\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/query/runner/idb-runner/idb-base-document-query-runner.ts","import { isNull, NdbDocument } from '@normalized-db/core';\n\nexport class ListResult<DbItem extends NdbDocument> {\n\n  public static readonly DEFAULT_OFFSET = 0;\n  public static readonly DEFAULT_LIMIT = Infinity;\n\n  constructor(private readonly _items?: DbItem[],\n              private _total?: number,\n              private readonly _offset?: number,\n              private readonly _limit?: number) {\n    if (!this._items) {\n      this._items = [];\n    }\n\n    if (isNull(this._total)) {\n      this._total = this._items.length;\n    }\n\n    if (isNull(this._offset)) {\n      this._offset = ListResult.DEFAULT_OFFSET;\n    }\n\n    if (isNull(this._limit)) {\n      this._limit = ListResult.DEFAULT_LIMIT;\n    }\n  }\n\n  public get items(): DbItem[] {\n    return this._items;\n  }\n\n  public get first(): DbItem | null {\n    return this.isEmpty ? null : this._items[0];\n  }\n\n  public get total(): number {\n    return this._total;\n  }\n\n  public get offset(): number {\n    return this._offset;\n  }\n\n  public get limit(): number {\n    return this._limit;\n  }\n\n  public get isEmpty(): boolean {\n    return !this.hasItems;\n  }\n\n  public get hasItems(): boolean {\n    return this._total > 0 && this._offset < this._total;\n  }\n\n  public get hasBoundaries(): boolean {\n    return this._offset > 0 || this._limit < Infinity;\n  }\n\n  public push(item: DbItem): void {\n    this._items.push(item);\n    this._total++;\n  }\n\n  public unshift(item: DbItem): void {\n    this._items.unshift(item);\n    this._total++;\n  }\n\n  public remove(item: DbItem): void {\n    const index = this._items.indexOf(item);\n    if (index >= 0) {\n      this._items.splice(index, 1);\n      this._total--;\n    }\n  }\n\n  public removeAt(index: number): void {\n    if (index >= 0 && index < this._items.length) {\n      this._items.splice(index, 1);\n      this._total--;\n    }\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/query/list-result/list-result.ts","import { NdbDocument } from '@normalized-db/core';\nimport { Predicate } from '../../model/predicate';\n\nexport class Filter<DbItem extends NdbDocument> {\n\n  constructor(private readonly _predicate: Predicate<DbItem>,\n              public readonly requiresDenormalization: boolean = false) {\n  }\n\n  public test(item: DbItem): boolean | Promise<boolean> {\n    return this._predicate(item);\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/query/model/filter.ts","import { ListResult } from '../list-result/list-result';\nimport { Query } from '../query';\nimport { Queryable } from '../queryable';\nimport { Mapper } from './mapper';\nimport { ReducerFunc } from './reduce-func';\n\nexport class Reducer<QueryResult, MapperResult, Result> implements Queryable<Result> {\n\n  private _cachedResult?: Result;\n\n  constructor(public readonly query: Query<QueryResult>,\n              public readonly mapper: Mapper<QueryResult, MapperResult>,\n              private readonly _callback: ReducerFunc<MapperResult, Result>,\n              private readonly _initialValue: Result = null) {\n  }\n\n  /**\n   * @inheritDoc\n   *\n   * @returns {Promise<Result>}\n   */\n  public async result(noCache = false): Promise<Result> {\n    if (this._cachedResult && !noCache) {\n      return this._cachedResult;\n    }\n\n    const parentResult = (await this.parent.result(noCache)).items;\n    const parentResultLength = parentResult.length;\n    let i = 0, accumulated = this._initialValue;\n    while (i < parentResultLength) {\n      accumulated = await this._callback(accumulated, parentResult[i], i, parentResult);\n      i++;\n    }\n\n    return this._cachedResult = accumulated;\n  }\n\n  /**\n   * @{inheritDoc}\n   *\n   * @returns {Promise<void>}\n   */\n  public async invalidateCachedResult(): Promise<void> {\n    await this.parent.invalidateCachedResult();\n    this._cachedResult = null;\n  }\n\n  public get parent(): Queryable<ListResult<any>> {\n    return this.mapper || this.query;\n  }\n\n  /**\n   * Returns the result of the underlying query. If `noCache` is `true` the query will be re-run.\n   *\n   * @param {boolean} noCache\n   * @returns {Promise<ListResponse<QueryResult>>}\n   */\n  public queryResult(noCache = false): Promise<ListResult<QueryResult>> {\n    return this.query.result(noCache);\n  }\n\n  /**\n   * Returns the result of the underlying mapper. If there is no mapper the query result will be returned instead.\n   * If `noCache` is `true` the query will be re-run.\n   *\n   * @param {boolean} noCache\n   * @returns {Promise<ListResult<QueryResult|MapperResult>>}\n   */\n  public mapResult(noCache = false): Promise<ListResult<QueryResult | MapperResult>> {\n    return this.mapper ? this.mapper.result(noCache) : this.queryResult(noCache);\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/query/map-reduce/reducer.ts","import {\n  InvalidTypeError, ISchema, isNull, IStore, IStoreConfig, MissingKeyError, NdbDocument, NormalizedData,\n  ValidKey\n} from '@normalized-db/core';\nimport { Context } from '../context/context';\nimport { EventQueue } from '../event/utility/event-queue';\nimport { Command } from './command';\n\nexport abstract class BaseCommand<T, Ctx extends Context<any>> implements Command<T> {\n\n  protected readonly _typeConfig: IStore;\n  protected readonly _eventQueue: EventQueue;\n\n  constructor(protected readonly _context: Ctx,\n              protected readonly _type: string,\n              typeIsOptional = false) {\n    this._eventQueue = new EventQueue(this._context.eventPipe);\n\n    const schema = this.schema;\n\n    if (!typeIsOptional && (!_type || !schema.hasType(_type))) {\n      throw new InvalidTypeError(_type);\n    }\n\n    this._typeConfig = this._type ? schema.getConfig(this._type) : null;\n  }\n\n  protected get schema(): ISchema {\n    return this._context.schema();\n  }\n\n  protected hasKey(item: NdbDocument, config: IStoreConfig = this._typeConfig): boolean {\n    return config.key in item && !isNull(item[config.key]);\n  }\n\n  protected getKey(item: NdbDocument, config: IStoreConfig = this._typeConfig, isNullAllowed = false): ValidKey | null {\n    if (!isNullAllowed && !this.hasKey(item, config)) {\n      throw new MissingKeyError(this._type, config.key);\n    }\n\n    return item[config.key];\n  }\n\n  protected getTypes(normalizedData: NormalizedData): string[] {\n    return Object.keys(normalizedData);\n  }\n\n  protected onSuccess(): void {\n    this._eventQueue.notify();\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/command/base-command.ts","import { BaseEvent } from '../base-event';\nimport { EventPipe } from './event-pipe';\n\nexport class EventQueue {\n\n  private readonly _queue: BaseEvent<any, any>[] = [];\n\n  constructor(private readonly _eventPipe: EventPipe<any>) {\n  }\n\n  public enqueue(event: BaseEvent<any, any>): void {\n    this._queue.unshift(event);\n  }\n\n  public notify(): void {\n    let i = this._queue.length;\n    while (--i >= 0) {\n      this._eventPipe.notify(this._queue.pop());\n    }\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/event/utility/event-queue.ts","import { NdbDocument, ValidKey } from '@normalized-db/core';\nimport { DataStoreTypes } from '../model/data-store-types';\nimport { BaseEvent } from './base-event';\n\nexport class UpdatedEvent<Types extends DataStoreTypes, T extends NdbDocument> extends BaseEvent<Types, T> {\n\n  constructor(type: Types, item: T, itemKey: ValidKey) {\n    super('updated', type, item, itemKey);\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/event/updated-event.ts","import { NdbDocument, ReverseReferences, ValidKey } from '@normalized-db/core';\nimport { Parent } from '../model/parent';\n\nexport class RefsWriteUtility {\n\n  public static add(item: NdbDocument, parent: Parent | Parent[]): void {\n    const refs: ReverseReferences = item._refs || {};\n    if (Array.isArray(parent)) {\n      parent.forEach(p => this.addKey(refs, p.type, p.key));\n    } else {\n      this.addKey(refs, parent.type, parent.key);\n    }\n\n    if (!item._refs) {\n      Object.assign(item, { _refs: refs });\n    }\n  }\n\n  private static addKey(refs: ReverseReferences, type: string, key: ValidKey): void {\n    if (type in refs) {\n      refs[type].add(key);\n    } else {\n      refs[type] = new Set<ValidKey>([key]);\n    }\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/utility/refs-write.ts","import { NotFoundError } from '@normalized-db/core';\nimport { Transaction } from 'idb';\nimport { IdbContext } from '../../context/idb-context/idb-context';\nimport { ClearedEvent } from '../../event/cleared-event';\nimport { IdbLogger } from '../../logging/idb-logging/idb-logger';\nimport { ClearCommand } from '../clear-command';\nimport { IdbBaseCommand } from './idb-base-command';\n\nexport class IdbClearCommand extends IdbBaseCommand<IdbContext<any>> implements ClearCommand {\n\n  constructor(context: IdbContext<any>, private readonly _includeLogs = false) {\n    super(context, null, true);\n  }\n\n  /**\n   * @inheritDoc\n   *\n   * @param {string | string[]} type\n   * @returns {Promise<boolean>}\n   * @throws {NotFoundError}\n   */\n  public async execute(type?: string | string[]): Promise<boolean> {\n    let involvedTypes: string[];\n    if (type) {\n      involvedTypes = Array.isArray(type) ? type : [type];\n    } else {\n      involvedTypes = await this._context.objectStoreNames(false);\n    }\n\n    if (!this._includeLogs) {\n      const logStoreIndex = involvedTypes.indexOf(IdbLogger.OBJECT_STORE);\n      if (logStoreIndex >= 0) {\n        involvedTypes.splice(logStoreIndex, 1);\n      }\n    }\n\n    let transaction: Transaction;\n    try {\n      transaction = await this._context.write(involvedTypes);\n    } catch (e) {\n      console.error(e);\n      return false;\n    }\n\n    try {\n      involvedTypes.forEach(osn => transaction.objectStore(osn).clear());\n      await transaction.complete;\n    } catch (e) {\n      try {\n        transaction.abort();\n      } catch (e2) {\n        e = e2;\n      }\n      console.error(e);\n      return false;\n    }\n\n    involvedTypes.forEach(involvedType =>\n        this._eventQueue.enqueue(new ClearedEvent(involvedType)));\n\n    this.onSuccess();\n    return true;\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/command/idb-command/idb-clear-command.ts","import { DataStoreTypes } from '../model/data-store-types';\nimport { BaseEvent } from './base-event';\n\nexport class ClearedEvent<Types extends DataStoreTypes> extends BaseEvent<Types, void> {\n\n  constructor(type: Types) {\n    super('cleared', type, null, null);\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/event/cleared-event.ts","import { LogMode } from '@normalized-db/core';\nimport { SchemaLogConfig } from '@normalized-db/core/lib/src/schema/schema-log-config';\nimport { Context } from '../context/context';\nimport { BaseEvent } from '../event/base-event';\nimport { EventPipe } from '../event/utility/event-pipe';\nimport { EventRegistration } from '../event/utility/event-registration';\nimport { OnDataChanged } from '../event/utility/on-data-changed';\nimport { DataStoreTypes } from '../model/data-store-types';\nimport { ClearLogsOptions } from './clear-command/clear-logs-options';\nimport { LogConfig } from './config/log-config';\nimport { LogQuery } from './query/log-query';\nimport { LogQueryConfig } from './query/log-query-config';\nimport { LogQueryRunner } from './query/log-query-runner';\n\nexport abstract class Logger<Types extends DataStoreTypes, Ctx extends Context<Types>> implements OnDataChanged {\n\n  private readonly _eventPipe: EventPipe<Types>;\n  private readonly _schemaLogConfig: SchemaLogConfig;\n\n  private _config: LogConfig<Types>;\n\n  constructor(protected readonly _context: Ctx) {\n    this._eventPipe = this._context.eventPipe;\n    this._schemaLogConfig = this._context.schema().getLogConfig();\n  }\n\n  /**\n   *\n   * @param enable\n   */\n  public enable(enable?: boolean | LogConfig<Types>): EventRegistration<Types> | undefined {\n    if (enable !== false) {\n      this._config = typeof enable === 'object' ? enable : undefined;\n      /*\n       * TODO register only for those events needed to log all entities with logging enabled\n       * (consider both, _config and _schemaLogConfig, simplify `isLoggingEnabled` / `getLogMode` and their usages)\n       */\n      return this._eventPipe.register(this).build();\n    } else {\n      this.disable();\n      return undefined;\n    }\n  }\n\n  public disable(): void {\n    this._config = undefined;\n    this._eventPipe.unregister(this);\n  }\n\n  public logs(autoCloseContext = true): LogQuery<Types> {\n    return new LogQuery(this._context, autoCloseContext);\n  }\n\n  public abstract queryRunner(config: LogQueryConfig): LogQueryRunner<Types>;\n\n  public abstract ndbOnDataChanged(event: BaseEvent<Types, any>): void | Promise<void>;\n\n  public abstract clear(options?: ClearLogsOptions<Types>): Promise<boolean>;\n\n  protected isLoggingEnabled(type: Types, event: BaseEvent<Types, any>): boolean {\n    return this._config\n        ? this._config.isLoggingEnabled(type, event.eventType, event.itemKey)\n        : this._schemaLogConfig.isLoggingEnabled(type, event.eventType, event.itemKey);\n  }\n\n  protected getLogMode(type: Types): LogMode {\n    return this._config\n        ? this._config.getLogMode(type)\n        : this._schemaLogConfig.getLogMode(type);\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/logging/logger.ts","import { ValidKey } from '@normalized-db/core';\nimport { Context } from '../../context/context';\nimport { DataStoreTypes } from '../../model/data-store-types';\nimport { Parent } from '../../model/parent';\nimport { Predicate } from '../../model/predicate';\nimport { Queryable } from '../../query/queryable';\nimport { LogAction } from '../model/log-action';\nimport { LogEntry } from '../model/log-entry';\nimport { LogQueryConfig } from './log-query-config';\n\nexport class LogQuery<Types extends DataStoreTypes> implements Queryable<LogEntry<Types>[]> {\n\n  private _cachedResult: LogEntry<Types>[];\n\n  private _dateRange: IDBKeyRange;\n  private _type: Types;\n  private _key: ValidKey;\n  private _action: LogAction;\n  private _parent: Parent;\n  private _filter?: Predicate<LogEntry<Types>>;\n\n  constructor(protected readonly _context: Context<Types>,\n              private readonly _autoCloseContext: boolean) {\n  }\n\n  /**\n   * Retrieve log-entries created at the given date-time.\n   *\n   * @param {Date} time\n   * @returns {LogQuery<Types extends DataStoreTypes>}\n   */\n  public time(time: Date): this {\n    this._dateRange = IDBKeyRange.only(time);\n    return this;\n  }\n\n  /**\n   * Retrieve log-entries created after the given date-time. If `open` is `true` the `lower`-date will be excluded,\n   * it is included by default.\n   *\n   * @param {Date} lower\n   * @param {boolean} open\n   * @returns {LogQuery<Types extends DataStoreTypes>}\n   */\n  public after(lower: Date, open = false): this {\n    this._dateRange = IDBKeyRange.lowerBound(lower, open);\n    return this;\n  }\n\n  /**\n   * Retrieve log-entries created before the given date-time. If `open` is `true` the `upper`-date will be excluded,\n   * it is included by default.\n   *\n   * @param {Date} upper\n   * @param {boolean} open\n   * @returns {LogQuery<Types extends DataStoreTypes>}\n   */\n  public before(upper: Date, open = false): this {\n    this._dateRange = IDBKeyRange.upperBound(upper, open);\n    return this;\n  }\n\n  /**\n   * Retrieve log-entries created after the given `lower`-date-time and before the given `upper`-date-time.\n   * If `…Open` is `true` the related date will be excluded, both are included by default.\n   *\n   * @param {Date} lower\n   * @param {Date} upper\n   * @param {boolean} lowerOpen\n   * @param {boolean} upperOpen\n   * @returns {LogQuery<Types extends DataStoreTypes>}\n   */\n  public between(lower: Date, upper: Date, lowerOpen = false, upperOpen = false): this {\n    this._dateRange = IDBKeyRange.bound(lower, upper, lowerOpen, upperOpen);\n    return this;\n  }\n\n  /**\n   * Filter the result by the data-store-type.\n   *\n   * @param {Types} type\n   * @returns {LogQuery<Types extends DataStoreTypes>}\n   */\n  public type(type: Types): this {\n    this._type = type;\n    return this;\n  }\n\n  /**\n   * Filter the result by a primary-key. You probably want to use `type(…)` as well when filtering by a key.\n   *\n   * @param {string} key\n   * @returns {LogQuery<Types extends DataStoreTypes>}\n   */\n  public key(key: ValidKey): this {\n    this._key = key;\n    return this;\n  }\n\n  /**\n   * Filter the result by the action (e.g. `created` or `removed`).\n   *\n   * @param {LogAction} action\n   * @returns {LogQuery<Types extends DataStoreTypes>}\n   */\n  public action(action: LogAction): this {\n    this._action = action;\n    return this;\n  }\n\n  /**\n   * Only include log-entries with a specific `Parent`.\n   *\n   * @param {Parent} parent\n   * @returns {LogQuery<Types extends DataStoreTypes>}\n   */\n  public parent(parent: Parent): this {\n    this._parent = parent;\n    return this;\n  }\n\n  /**\n   * Filter items that shall be included into the result.\n   *\n   * @param {Predicate<LogEntry<Types>>} callback\n   * @returns {LogQuery<LogEntry<Types>>}\n   */\n  public filter(callback: Predicate<LogEntry<Types>>): this {\n    this._filter = callback;\n    return this;\n  }\n\n  /**\n   * @inheritDoc\n   *\n   * @param {boolean} noCache\n   * @returns {Promise<LogEntry<Types extends DataStoreTypes>[]>}\n   */\n  public async result(noCache?: boolean): Promise<LogEntry<Types>[]> {\n    if (this._cachedResult && !noCache) {\n      return this._cachedResult;\n    }\n\n    await this._context.open();\n    const runner = this._context.logger().queryRunner(this.getQueryConfig());\n    this._cachedResult = await runner.execute();\n    this.autoClose();\n    return this._cachedResult;\n  }\n\n  /**\n   * @inheritDoc\n   *\n   * @returns {Promise<void>}\n   */\n  public async invalidateCachedResult(): Promise<void> {\n    this._cachedResult = null;\n  }\n\n  protected getQueryConfig(): LogQueryConfig {\n    return {\n      dateRange: this._dateRange,\n      type: this._type,\n      key: this._key,\n      action: this._action,\n      parent: this._parent,\n      filter: this._filter\n    };\n  }\n\n  protected async autoClose(): Promise<void> {\n    if (this._autoCloseContext) {\n      await this._context.close();\n    }\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/logging/query/log-query.ts","import { ValidKey } from '@normalized-db/core/lib/src/model/valid-key';\nimport { BaseEvent } from '../../event/base-event';\nimport { CreatedEvent } from '../../event/created-event';\nimport { RemovedEvent } from '../../event/removed-event';\nimport { DataStoreTypes } from '../../model/data-store-types';\nimport { Parent } from '../../model/parent';\nimport { LogAction } from './log-action';\n\nexport class LogEntry<Types extends DataStoreTypes> {\n\n  public readonly id: number;\n  public readonly time: Date;\n  public readonly action: LogAction;\n\n  public readonly type: Types;\n  public readonly key: ValidKey;\n\n  public readonly item?: any;\n  public readonly parent?: Parent;\n\n  constructor(event: BaseEvent<Types, any>, includeData = false) {\n    this.time = event.time;\n    this.action = event.eventType;\n    this.type = event.dataStoreType;\n    this.key = event.itemKey;\n\n    if (includeData) {\n      this.item = event.item;\n    }\n\n    if (event instanceof CreatedEvent || event instanceof RemovedEvent) {\n      this.parent = (event as any).parent;\n    }\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/logging/model/log-entry.ts","import { isNull } from '@normalized-db/core';\nimport { ObjectStore } from 'idb';\nimport { IdbContext } from '../../context/idb-context/idb-context';\nimport { DataStoreTypes } from '../../model/data-store-types';\nimport { ClearLogsCommand } from '../clear-command/clear-logs-command';\nimport { ClearLogsOptions } from '../clear-command/clear-logs-options';\nimport { LogEntry } from '../model/log-entry';\nimport { IdbLogger } from './idb-logger';\n\nexport class IdbClearLogsCommand<Types extends DataStoreTypes> implements ClearLogsCommand<Types> {\n\n  constructor(private readonly _context: IdbContext<Types>) {\n  }\n\n  public async execute(options?: ClearLogsOptions<Types>): Promise<boolean> {\n    try {\n      if (options && !isNull(options.key)) {\n        await this.clearItem(options);\n      } else if (options && options.types && options.types.length > 0) {\n        await this.clearTypes(options);\n      } else {\n        await (await this.getWritableObjectStore()).clear();\n      }\n    } catch (e) {\n      console.error('message' in e ? e.message : e);\n      return false;\n    }\n\n    return true;\n  }\n\n  private async clearTypes(options?: ClearLogsOptions<Types>): Promise<void> {\n    let lower: Types, upper: Types, typeArr: Types[];\n    if (Array.isArray(options.types)) {\n      typeArr = options.types.sort();\n      lower = typeArr[0];\n      upper = typeArr[options.types.length - 1];\n    } else {\n      typeArr = [options.types];\n      lower = upper = options.types;\n    }\n\n    const typeIdx = (await this.getWritableObjectStore()).index(IdbLogger.IDX_TYPE);\n    const requests: Promise<void>[] = [];\n    let cursor = await typeIdx.openCursor(IDBKeyRange.bound(lower, upper));\n    while (cursor) {\n      if (cursor.value) {\n        const logEntry = cursor.value as LogEntry<Types>;\n        if (typeArr.indexOf(logEntry.type) >= 0) {\n          requests.push(cursor.delete());\n        }\n      }\n\n      cursor = await cursor.continue();\n    }\n\n    await Promise.all(requests);\n  }\n\n  private async clearItem(options?: ClearLogsOptions<Types>): Promise<void> {\n    const keyIdx = (await this.getWritableObjectStore()).index(IdbLogger.IDX_KEY);\n    const requests: Promise<void>[] = [];\n    const isTypesArray = Array.isArray(options.types);\n    let cursor = await keyIdx.openCursor(options.key);\n    while (cursor) {\n      if (cursor.value) {\n        const logEntry = cursor.value as LogEntry<Types>;\n        if ((isTypesArray && (options.types as Array<Types>).indexOf(logEntry.type) >= 0) ||\n            logEntry.type === options.types) {\n          requests.push(cursor.delete());\n        }\n      }\n\n      cursor = await cursor.continue();\n    }\n\n    await Promise.all(requests);\n  }\n\n  private async getWritableObjectStore(): Promise<ObjectStore> {\n    return (await this._context.write(IdbLogger.OBJECT_STORE)).objectStore(IdbLogger.OBJECT_STORE);\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/logging/idb-logging/idb-clear-logs-command.ts","import { isNull } from '@normalized-db/core';\nimport { ObjectStore, Transaction } from 'idb';\nimport { IdbContext } from '../../context/idb-context/idb-context';\nimport { InvalidQueryRunnerStatusError } from '../../error/index';\nimport { DataStoreTypes } from '../../model/data-store-types';\nimport { LogEntry } from '../model/log-entry';\nimport { LogQueryConfig } from '../query/log-query-config';\nimport { LogQueryRunner } from '../query/log-query-runner';\nimport { IdbLogger } from './idb-logger';\n\nexport class IdbLogQueryRunner<Types extends DataStoreTypes> implements LogQueryRunner<DataStoreTypes> {\n\n  private readonly result: LogEntry<Types>[] = [];\n\n  private transaction: Transaction;\n  private logStore: ObjectStore;\n\n  constructor(private readonly _context: IdbContext<Types>,\n              private readonly _config: LogQueryConfig) {\n  }\n\n  public async execute(): Promise<LogEntry<Types>[]> {\n    await this.start();\n\n    let cursor = await (this._config.dateRange\n      ? this.logStore.index(IdbLogger.IDX_TIME).openCursor(this._config.dateRange)\n      : this.logStore.openCursor());\n\n    const requests: Promise<void>[] = [];\n    while (cursor) {\n      if (cursor.value) {\n        requests.push(this.validate(cursor.value as LogEntry<Types>));\n      }\n      cursor = await cursor.continue();\n    }\n\n    await Promise.all(requests);\n    this.stop();\n    return this.result;\n  }\n\n  private async start(): Promise<void> {\n    if (this.transaction) {\n      throw new InvalidQueryRunnerStatusError('Log-Query is already running');\n    }\n\n    this.transaction = await this._context.read(IdbLogger.OBJECT_STORE);\n    this.logStore = this.transaction.objectStore(IdbLogger.OBJECT_STORE);\n  }\n\n  private stop(): void {\n    this.transaction = this.logStore = null;\n  }\n\n  private async validate(logEntry: LogEntry<Types>): Promise<void> {\n    // TODO make more use of indices\n    if (!this._config.type || this._config.type === logEntry.type) { // type matching\n      if (isNull(this._config.key) || this._config.key === logEntry.key) { // key matching\n        if (!this._config.action || this._config.action === logEntry.action) { // action matching\n          if (!this._config.parent || this._config.parent.equals(logEntry.parent)) {\n            if (!this._config.filter || this._config.filter(logEntry)) { // filter-predicate matching\n              this.result.push(logEntry);\n            }\n          }\n        }\n      }\n    }\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/logging/idb-logging/idb-log-query-runner.ts","import { isNull, ValidKey } from '@normalized-db/core';\nimport { Parent } from '../model/parent';\n\nexport class ChildNotFoundError extends Error {\n\n  constructor(parent: Parent, key?: ValidKey) {\n    super('Could not find child ' + (isNull(key) ? `with key \"${key}\"` : '') +\n      ` in \"${parent.type}.${parent.field}\" from \"${parent.key}\"`);\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/error/child-not-found-error.ts","export class EmptyResultError extends Error {\n\n  constructor() {\n    super('Query returned an empty result');\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/error/empty-result-error.ts","export class InvalidQueryConfigError extends Error {\n\n  constructor(reason: string) {\n    super(`The query config is invalid. ${reason}`);\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/error/invalid-query-config-error.ts","export class ListenerRegisteredError extends Error {\n\n  constructor() {\n    super('Event listener is already registered');\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/error/listener-registered-error.ts","export class OrderByInvalidTypeError extends Error {\n\n  constructor(field: string, type: string) {\n    super(`${field} was expected to be a number, string or Date but ${type} was found`);\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/error/order-by-invalid-type-error.ts","export class OrderByTypeMismatchError extends Error {\n\n  constructor(field: string, t1: string, t2: string) {\n    super(`Values on field \"${field}\" are not from same type hence cannot be compared (${t1}, ${t2})`);\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/error/order-by-type-mismatch-error.ts","import { isNull, ValidKey } from '@normalized-db/core';\n\nexport class RefNotFoundError extends Error {\n\n  constructor(refType: string, key?: ValidKey) {\n    super(`Could not find reverse reference to \"${refType}\"` + (isNull(key) ? `with key \"${key}\"` : ''));\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/error/ref-not-found-error.ts","import { NdbDocument } from '@normalized-db/core';\nimport { IdbContext } from '../../context/idb-context/idb-context';\nimport { ClearCommand } from '../clear-command';\nimport { CommandFactory } from '../command-factory';\nimport { CreateCommand } from '../create-command';\nimport { PutCommand } from '../put-command';\nimport { RemoveCommand } from '../remove-command';\nimport { SetCommand } from '../set-command';\nimport { UpdateCommand } from '../update-command';\nimport { IdbClearCommand } from './idb-clear-command';\nimport { IdbCreateCommand } from './idb-create-command';\nimport { IdbPutCommand } from './idb-put-command';\nimport { IdbRemoveCommand } from './idb-remove-command';\nimport { IdbSetCommand } from './idb-set-command';\nimport { IdbUpdateCommand } from './idb-update-command';\n\nexport class IdbCommandFactory implements CommandFactory {\n\n  private static _instance: IdbCommandFactory;\n\n  public static instance(context: IdbContext<any>): IdbCommandFactory {\n    if (!this._instance) {\n      this._instance = new IdbCommandFactory(context);\n    }\n\n    return this._instance;\n  }\n\n  private constructor(private readonly _context: IdbContext<any>) {\n  }\n\n  public createCommand<Item extends NdbDocument>(type: string): CreateCommand<Item> {\n    return new IdbCreateCommand<Item>(this._context, type);\n  }\n\n  public updateCommand<Item extends NdbDocument>(type: string): UpdateCommand<Item> {\n    return new IdbUpdateCommand<Item>(this._context, type);\n  }\n\n  public setCommand<Data extends object>(type: string): SetCommand<Data> {\n    return new IdbSetCommand<Data>(this._context, type);\n  }\n\n  public putCommand<Item extends NdbDocument>(type: string): PutCommand<Item> {\n    return new IdbPutCommand<Item>(this._context, type);\n  }\n\n  public removeCommand<Item extends NdbDocument>(type: string): RemoveCommand<Item> {\n    return new IdbRemoveCommand<Item>(this._context, type);\n  }\n\n  public clearCommand(includeLogs?: boolean): ClearCommand {\n    return new IdbClearCommand(this._context, includeLogs);\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/command/idb-command/idb-command-factory.ts","import { isNull, MissingKeyError, NdbDocument } from '@normalized-db/core';\nimport { IdbContext } from '../../context/idb-context/idb-context';\nimport { EmptyInputError } from '../../error/empty-input-error';\nimport { Parent } from '../../model/parent';\nimport { CreateCommand } from '../create-command';\nimport { IdbBaseWriteCommand } from './idb-base-write-command';\n\nexport class IdbCreateCommand<T extends NdbDocument> extends IdbBaseWriteCommand<T> implements CreateCommand<T> {\n\n  constructor(context: IdbContext<any>, type: string) {\n    super(context, type);\n    this.setKey = this.setKey.bind(this);\n  }\n\n  /**\n   * @inheritDoc\n   *\n   * @param {T|T[]} data\n   * @param {Parent|Parent[]} parent\n   * @returns {Promise<boolean>}\n   * @throws {MissingKeyError}\n   */\n  public async execute(data: T | T[], parent?: Parent | Parent[]): Promise<boolean> {\n    if (isNull(data)) {\n      throw new EmptyInputError('create');\n    }\n\n    if (Array.isArray(data)) {\n      for (let i = 0; i < data.length; i++) {\n        await this.setKey(data[i]);\n      }\n    } else {\n      await this.setKey(data);\n    }\n\n    return super.write(data, parent);\n  }\n\n  /**\n   * Set a new key. Any existing key will be overridden.\n   *\n   * @param {T} item\n   */\n  private async setKey(item: T): Promise<void> {\n    if (this._typeConfig.autoKey) {\n      delete item[this._typeConfig.key];\n    } else {\n      const newKey = await this._context.newKey(this._type);\n      if (isNull(newKey)) {\n        throw new MissingKeyError(this._type, this._typeConfig.key);\n      }\n\n      item[this._typeConfig.key] = newKey;\n    }\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/command/idb-command/idb-create-command.ts","import { isNull, MissingKeyError, NdbDocument } from '@normalized-db/core';\nimport { IdbContext } from '../../context/idb-context/idb-context';\nimport { EmptyInputError } from '../../error/empty-input-error';\nimport { Parent } from '../../model/parent';\nimport { PutCommand } from '../put-command';\nimport { IdbBaseWriteCommand } from './idb-base-write-command';\n\nexport class IdbPutCommand<T extends NdbDocument> extends IdbBaseWriteCommand<T> implements PutCommand<T> {\n\n  constructor(context: IdbContext<any>, type: string) {\n    super(context, type);\n    this.setKey = this.setKey.bind(this);\n  }\n\n  /**\n   * @inheritDoc\n   *\n   * @param {T|T[]} data\n   * @param {Parent|Parent[]} parent\n   * @param {boolean} isPartialUpdate\n   * @returns {Promise<boolean>}\n   * @throws {MissingKeyError}\n   */\n  public async execute(data: T | T[], parent?: Parent | Parent[], isPartialUpdate = false): Promise<boolean> {\n    if (isNull(data)) {\n      throw new EmptyInputError('put');\n    }\n\n    if (Array.isArray(data)) {\n      for (let i = 0; i < data.length; i++) {\n        await this.setKey(data[i]);\n      }\n    } else {\n      await this.setKey(data);\n    }\n\n    return await super.write(data, parent);\n  }\n\n  private async setKey(item: T): Promise<void> {\n    if (this.hasKey(item) || this._typeConfig.autoKey) {\n      return;\n    }\n\n    const newKey = await this._context.newKey(this._type);\n    if (isNull(newKey)) {\n      throw new MissingKeyError(this._type, this._typeConfig.key);\n    }\n\n    item[this._typeConfig.key] = newKey;\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/command/idb-command/idb-put-command.ts","import { isNull, IStore, IStoreTarget, NdbDocument, NotFoundError, ValidKey } from '@normalized-db/core';\nimport { ObjectStore, Transaction } from 'idb';\nimport { IdbContext } from '../../context/idb-context/idb-context';\nimport { EmptyInputError } from '../../error/empty-input-error';\nimport { RemovedEvent } from '../../event/removed-event';\nimport { Parent } from '../../model/parent';\nimport { isValidKey } from '../../utility/valid-key';\nimport { RemoveCommand } from '../remove-command';\nimport { IdbBaseCommand } from './idb-base-command';\n\nexport class IdbRemoveCommand<T extends NdbDocument> extends IdbBaseCommand<T | ValidKey> implements RemoveCommand<T> {\n\n  constructor(context: IdbContext<any>, type: string) {\n    super(context, type);\n  }\n\n  /**\n   * @inheritDoc\n   *\n   * @param {T|ValidKey} data\n   * @returns {Promise<boolean>}\n   * @throws {NotFoundError}\n   */\n  public async execute(data: T | ValidKey): Promise<boolean> {\n    if (isNull(data)) {\n      throw new EmptyInputError('remove');\n    }\n\n    const key = isValidKey(data) ? data as ValidKey : this.getKey(data as NdbDocument);\n    const transaction = await this._context.write();\n    const oldItem = await transaction.objectStore(this._type).get(key);\n    if (isNull(oldItem)) {\n      throw new NotFoundError(this._type, key);\n    }\n\n    try {\n      await this.executeRecursive(this._type, oldItem, transaction, transaction.objectStore(this._type));\n    } catch (e) {\n      console.error(e);\n      try {\n        transaction.abort();\n      } catch (e2) {\n        console.error(e2);\n      }\n      return false;\n    }\n\n    this.onSuccess();\n    return true;\n  }\n\n  private async executeRecursive(type: string,\n                                 item: NdbDocument,\n                                 transaction: Transaction,\n                                 objectStore: ObjectStore): Promise<void> {\n    const config = this.schema.getConfig(type);\n    const key = this.getKey(item, config);\n    await Promise.all([\n      this.cascadeRemoval(transaction, config.targets, type, item),\n      this.updateParents(transaction, type, item),\n      objectStore.delete(key)\n    ]);\n\n    this._eventQueue.enqueue(new RemovedEvent(type, item, key));\n  }\n\n  // region remove dependent child entities\n\n  private async cascadeRemoval(transaction: Transaction,\n                               targets: IStoreTarget,\n                               type: string,\n                               oldItem: any): Promise<void> {\n    if (!targets) {\n      return;\n    }\n\n    const oldItemKey = this.getKey(oldItem, this.schema.getConfig(type));\n    await Promise.all(Object.keys(targets).map(async field => {\n      const target = targets[field];\n      if (target.cascadeRemoval && field in oldItem && !isNull(oldItem[field])) {\n        await this.removeTarget(transaction, type, oldItemKey, target.type, oldItem[field]);\n      }\n    }));\n  }\n\n  private async removeTarget(transaction: Transaction,\n                             parentType: string,\n                             parentKey: ValidKey,\n                             targetType: string,\n                             targetKeys: ValidKey | ValidKey[]): Promise<void> {\n    const objectStore = transaction.objectStore(targetType);\n    const remover = async targetKey => {\n      const target = await objectStore.get(targetKey);\n      if (!isNull(target)) {\n        if ('_refs' in target && parentType in target._refs) {\n          // prevent update of parent which is deleted anyway\n          target._refs[parentType].delete(parentKey);\n        }\n        await this.executeRecursive(targetType, target, transaction, objectStore);\n      }\n    };\n\n    if (Array.isArray(targetKeys)) {\n      await Promise.all(targetKeys.map(remover));\n    } else {\n      await remover(targetKeys);\n    }\n  }\n\n  // endregion\n\n  // region update parents\n\n  private async updateParents(transaction: Transaction, oldItemType: string, oldItem: NdbDocument): Promise<void> {\n    if ('_refs' in oldItem) {\n      const oldItemKey = this.getKey(oldItem, this.schema.getConfig(oldItemType));\n      await Promise.all(Object.keys(oldItem['_refs']).map(async refType => {\n        const parentConfig = this.schema.getConfig(refType);\n        const parentFields = this.getParentFields(oldItemType, parentConfig);\n\n        const requests: Promise<void>[] = [];\n        const objectStore = transaction.objectStore(refType);\n\n        const it: Iterator<any> = oldItem._refs[refType].values();\n        let current = it.next();\n        while (!current.done) {\n          requests.push(this.removeFromParent(\n            oldItemType,\n            oldItem,\n            oldItemKey,\n            objectStore,\n            current.value,\n            parentFields\n          ));\n          current = it.next();\n        }\n\n        return Promise.all(requests);\n      }));\n    }\n  }\n\n  private getParentFields(oldItemType: string, parentConfig: IStore): string[] {\n    const parentFields: string[] = [];\n    Object.keys(parentConfig.targets).forEach(field => {\n      if (parentConfig.targets[field].type === oldItemType) {\n        parentFields.push(field);\n      }\n    });\n\n    return parentFields;\n  }\n\n  private async removeFromParent(oldItemType: string,\n                                 oldItem: NdbDocument,\n                                 oldItemKey: ValidKey,\n                                 parentObjectStore: ObjectStore,\n                                 parentKey: ValidKey,\n                                 fields: string[]): Promise<void> {\n    const parentCursor = await parentObjectStore.openCursor(parentKey);\n    if (!isNull(parentCursor)) {\n      const enqueueRemovedEvent = (field: string) => this._eventQueue.enqueue(new RemovedEvent(\n        oldItemType,\n        oldItem,\n        oldItemKey,\n        new Parent(parentObjectStore.name, parentKey, field)\n      ));\n\n      let parentChanged = false;\n      const parent = parentCursor.value;\n      fields.forEach(async field => {\n        if (!(field in parent) || isNull(parent[field])) {\n          return;\n        }\n\n        const fieldValue = parent[field];\n        if (Array.isArray(fieldValue)) {\n          const index = fieldValue.findIndex(key => key === oldItemKey);\n          if (index >= 0) {\n            fieldValue.splice(index, 1);\n            parentChanged = true;\n            enqueueRemovedEvent(field);\n          }\n        } else if (fieldValue === oldItemKey) {\n          parent[field] = null;\n          parentChanged = true;\n          enqueueRemovedEvent(field);\n        }\n      });\n\n      if (parentChanged) {\n        await parentCursor.update(parent);\n      }\n    }\n  }\n\n  // endregion\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/command/idb-command/idb-remove-command.ts","// TODO move to core-module where `ValidKey` is defined also\nexport function isValidKey(key: any): boolean {\n  const type = typeof key;\n  return type === 'number' || type === 'string' || key instanceof Date;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/utility/valid-key.ts","import { isNull, MissingKeyError, NdbDocument, NotFoundError } from '@normalized-db/core';\nimport { EmptyInputError } from '../../error/empty-input-error';\nimport { UpdateCommand } from '../update-command';\nimport { IdbBaseUpdateCommand } from './idb-base-update-command';\n\nexport class IdbUpdateCommand<T extends NdbDocument> extends IdbBaseUpdateCommand<T> implements UpdateCommand<T> {\n\n  /**\n   * @inheritDoc\n   *\n   * @param {T|T[]} data\n   * @param {boolean} isPartialUpdate\n   * @returns {Promise<boolean>}\n   * @throws {MissingKeyError}\n   * @throws {NotFoundError}\n   */\n  public async execute(data: T | T[], isPartialUpdate = false): Promise<boolean> {\n    if (isNull(data)) {\n      throw new EmptyInputError('update');\n    }\n\n    return this.executeHelper(data, isPartialUpdate);\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/command/idb-command/idb-update-command.ts","import { ISchema, UniqueKeyCallback, ValidKey } from '@normalized-db/core';\nimport { IDenormalizerBuilder } from '@normalized-db/denormalizer';\nimport { INormalizer, INormalizerBuilder } from '@normalized-db/normalizer';\nimport { CommandFactory } from '../command/command-factory';\nimport { EventPipe } from '../event/utility/event-pipe';\nimport { Logger } from '../logging/logger';\nimport { DataStoreTypes } from '../model/data-store-types';\nimport { QueryRunnerFactory } from '../query/runner/query-runner-factory';\n\nexport abstract class Context<Types extends DataStoreTypes> {\n\n  public readonly eventPipe = new EventPipe<Types>();\n\n  private readonly _normalizer: INormalizer;\n  private readonly _uniqueKeyCallback: UniqueKeyCallback;\n\n  protected constructor(protected readonly _schema: ISchema,\n                        protected readonly _normalizerBuilder: INormalizerBuilder,\n                        protected readonly _denormalizerBuilder: IDenormalizerBuilder) {\n    this._normalizer = _normalizerBuilder.build();\n    this._uniqueKeyCallback = this._normalizer.getUniqueKeyCallback();\n  }\n\n  public abstract isReady(): boolean;\n\n  public abstract open(): Promise<void>;\n\n  public abstract close(): Promise<void>;\n\n  public schema(): ISchema {\n    return this._schema;\n  }\n\n  public normalizer(): INormalizer {\n    return this._normalizer;\n  }\n\n  public denormalizerBuilder(): IDenormalizerBuilder {\n    return this._denormalizerBuilder;\n  }\n\n  public newKey(type: string): ValidKey | Promise<ValidKey> | undefined {\n    return this._uniqueKeyCallback ? this._uniqueKeyCallback(type) : undefined;\n  }\n\n  public abstract queryRunnerFactory(): QueryRunnerFactory;\n\n  public abstract commandFactory(): CommandFactory;\n\n  public abstract logger(): Logger<Types, Context<Types>>;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/context/context.ts","import { DataStoreTypes } from '../../model/data-store-types';\nimport { BaseEvent } from '../base-event';\nimport { EventRegistration } from './event-registration';\nimport { EventRegistrationBuilder } from './event-registration.builder';\nimport { OnDataChanged } from './on-data-changed';\n\nexport class EventPipe<Types extends DataStoreTypes> {\n\n  private readonly _registrations = new Map<OnDataChanged, EventRegistration<Types>>();\n\n  public register(listener: OnDataChanged): EventRegistrationBuilder<Types> {\n    return new EventRegistrationBuilder<Types>(this._registrations, listener);\n  }\n\n  public unregister(listener: OnDataChanged): void {\n    this._registrations.delete(listener);\n  }\n\n  public notify(event: BaseEvent<Types, any>): void {\n    this._registrations.forEach(registration => {\n      if (registration.isMatching(event)) {\n        registration.notify(event);\n      }\n    });\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/event/utility/event-pipe.ts","import { EventSelection, ValidKey } from '@normalized-db/core';\nimport { ListenerRegisteredError } from '../../error/listener-registered-error';\nimport { DataStoreTypes } from '../../model/data-store-types';\nimport { EventRegistration } from './event-registration';\nimport { OnDataChanged } from './on-data-changed';\n\nexport class EventRegistrationBuilder<Types extends DataStoreTypes> {\n\n  private _eventSelection: EventSelection;\n  private _dataStoreType: Types | Types[];\n  private _itemKey: ValidKey | ValidKey[];\n\n  constructor(private readonly _registrations: Map<OnDataChanged, EventRegistration<Types>>,\n              private readonly _listener: OnDataChanged) {\n    if (this._registrations.has(_listener)) {\n      throw new ListenerRegisteredError();\n    }\n  }\n\n  public eventType(value: EventSelection): this {\n    this._eventSelection = value;\n    return this;\n  }\n\n  public type(value: Types | Types[]): this {\n    this._dataStoreType = value;\n    return this;\n  }\n\n  public itemKey(value: ValidKey | ValidKey[]): this {\n    this._itemKey = value;\n    return this;\n  }\n\n  public build(): EventRegistration<Types> {\n    const registration = new EventRegistration<Types>(\n        this._listener,\n        this._eventSelection,\n        this._dataStoreType,\n        this._itemKey\n    );\n\n    this._registrations.set(this._listener, registration);\n    return registration;\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/event/utility/event-registration.builder.ts","import { EventSelection, EventType, isNull, ValidKey } from '@normalized-db/core';\nimport { DataStoreTypes } from '../../model/data-store-types';\nimport { BaseEvent } from '../base-event';\nimport { OnDataChanged } from './on-data-changed';\n\nexport class EventRegistration<Types extends DataStoreTypes> {\n\n  constructor(private readonly _listener: OnDataChanged,\n              private _eventSelection?: EventSelection,\n              private _dataStoreType?: Types | Types[],\n              private _itemKey?: ValidKey | ValidKey[]) {\n  }\n\n  public addEventType(type: EventType): void {\n    if (!this._eventSelection) {\n      this._eventSelection = type;\n    } else if (Array.isArray(this._eventSelection)) {\n      this._eventSelection.push(type);\n    } else {\n      this._eventSelection = [this._eventSelection, type];\n    }\n  }\n\n  public removeEventType(type: EventType): void {\n    if (this._eventSelection) {\n      if (Array.isArray(this._eventSelection)) {\n        const index = this._eventSelection.indexOf(type);\n        if (index >= 0) {\n          this._eventSelection.splice(index, 1);\n        }\n      } else if (this._eventSelection === type) {\n        this._eventSelection = undefined;\n      }\n    }\n  }\n\n  public addDataStoreType(type: Types): void {\n    if (!this._dataStoreType) {\n      this._dataStoreType = type;\n    } else if (Array.isArray(this._dataStoreType)) {\n      this._dataStoreType.push(type);\n    } else {\n      this._dataStoreType = [this._dataStoreType, type];\n    }\n  }\n\n  public removeDataStoreType(type: Types): void {\n    if (this._dataStoreType) {\n      if (Array.isArray(this._dataStoreType)) {\n        const index = this._dataStoreType.indexOf(type);\n        if (index >= 0) {\n          this._dataStoreType.splice(index, 1);\n        }\n      } else if (this._dataStoreType === type) {\n        this._dataStoreType = undefined;\n      }\n    }\n  }\n\n  public addItemKey(key: ValidKey): void {\n    if (!this._itemKey) {\n      this._itemKey = key;\n    } else if (Array.isArray(this._itemKey)) {\n      this._itemKey.push(key);\n    } else {\n      this._itemKey = [this._itemKey, key];\n    }\n  }\n\n  public removeItemKey(key: ValidKey): void {\n    if (this._itemKey) {\n      if (Array.isArray(this._itemKey)) {\n        const index = this._itemKey.indexOf(key);\n        if (index >= 0) {\n          this._itemKey.splice(index, 1);\n        }\n      } else if (this._itemKey === key) {\n        this._itemKey = undefined;\n      }\n    }\n  }\n\n  public isMatching(event: BaseEvent<Types, any>): boolean {\n    if (!isNull(this._itemKey)) {\n      if (Array.isArray(this._itemKey)) {\n        if (this._itemKey.indexOf(event.itemKey) < 0) {\n          return false;\n        }\n      } else if (this._itemKey !== event.itemKey) {\n        return false;\n      }\n    }\n\n    if (this._eventSelection) {\n      if (Array.isArray(this._eventSelection)) {\n        if (this._eventSelection.indexOf(event.eventType) < 0) {\n          return false;\n        }\n      } else if (this._eventSelection !== event.eventType) {\n        return false;\n      }\n    }\n\n    if (this._dataStoreType) {\n      if (Array.isArray(this._dataStoreType)) {\n        if (this._dataStoreType.indexOf(event.dataStoreType) < 0) {\n          return false;\n        }\n      } else if (this._dataStoreType !== event.dataStoreType) {\n        return false;\n      }\n    }\n\n    return true;\n  }\n\n  public notify(event: BaseEvent<Types, any>): void {\n    this._listener.ndbOnDataChanged(event);\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/event/utility/event-registration.ts","import { ISchema, ISchemaConfig, isNull, Schema } from '@normalized-db/core';\nimport { IDenormalizerBuilder } from '@normalized-db/denormalizer';\nimport { INormalizerBuilder } from '@normalized-db/normalizer';\nimport { LogConfig } from '../logging/config/log-config';\nimport { DataStoreTypes } from '../model/data-store-types';\nimport { Context } from './context';\n\nexport abstract class ContextBuilder<Types extends DataStoreTypes, Ctx extends Context<Types>> {\n\n  protected _schema: ISchema;\n  protected _normalizerBuilder: INormalizerBuilder;\n  protected _denormalizerBuilder: IDenormalizerBuilder;\n  protected _enableLogging?: boolean | LogConfig<Types>;\n\n  public schema(value: ISchema): this {\n    this._schema = value;\n    return this;\n  }\n\n  public schemaConfig(value: ISchemaConfig): this {\n    this._schema = new Schema(value);\n    return this;\n  }\n\n  public normalizerBuilder(value: INormalizerBuilder): this {\n    this._normalizerBuilder = value;\n    return this;\n  }\n\n  public denormalizerBuilder(value: IDenormalizerBuilder): this {\n    this._denormalizerBuilder = value;\n    return this;\n  }\n\n  public enableLogging(value?: boolean | LogConfig<Types>): this {\n    this._enableLogging = isNull(value) ? true : value;\n    return this;\n  }\n\n  public abstract build(): Ctx;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/context/context.builder.ts","import { ISchema } from '@normalized-db/core';\nimport { IDenormalizerBuilder } from '@normalized-db/denormalizer';\nimport { INormalizerBuilder } from '@normalized-db/normalizer';\nimport { DB, default as DBFactory, Transaction, UpgradeDB } from 'idb';\nimport { CommandFactory } from '../../command/command-factory';\nimport { IdbCommandFactory } from '../../command/idb-command/idb-command-factory';\nimport { IdbLogger } from '../../logging/idb-logging/idb-logger';\nimport { Logger } from '../../logging/logger';\nimport { DataStoreTypes } from '../../model/data-store-types';\nimport { IdbQueryRunnerFactory } from '../../query/runner/idb-runner/idb-query-runner-factory';\nimport { QueryRunnerFactory } from '../../query/runner/query-runner-factory';\nimport { Context } from '../context';\nimport { IdbConfig } from './idb-config';\n\nexport class IdbContext<Types extends DataStoreTypes> extends Context<Types> {\n\n  protected readonly _logger = new IdbLogger<Types>(this);\n\n  protected _db: DB;\n\n  constructor(schema: ISchema,\n              normalizerBuilder: INormalizerBuilder,\n              denormalizerBuilder: IDenormalizerBuilder,\n              private readonly dbConfig: IdbConfig) {\n    super(schema, normalizerBuilder, denormalizerBuilder);\n    this.onUpgradeNeeded = this.onUpgradeNeeded.bind(this);\n  }\n\n  public isReady(): boolean {\n    return !!this._db;\n  }\n\n  public async open(): Promise<void> {\n    if (!this.isReady()) {\n      this._db = await DBFactory.open(\n        this.dbConfig.name,\n        this.dbConfig.version,\n        this.dbConfig.upgrade || this.onUpgradeNeeded\n      );\n    }\n  }\n\n  public async close(): Promise<void> {\n    if (this.isReady()) {\n      this._db.close();\n      this._db = null;\n    }\n  }\n\n  public queryRunnerFactory(): QueryRunnerFactory {\n    return IdbQueryRunnerFactory.instance(this);\n  }\n\n  public commandFactory(): CommandFactory {\n    return IdbCommandFactory.instance(this);\n  }\n\n  public logger(): Logger<Types, IdbContext<Types>> {\n    return this._logger;\n  }\n\n  public async objectStoreNames(autoCloseContext = false): Promise<string[]> {\n    await this.open();\n    const osnList = this._db.objectStoreNames;\n    const osnArray: string[] = [];\n    for (let i = 0; i < osnList.length; i++) {\n      osnArray.push(osnList.item(i));\n    }\n\n    if (autoCloseContext) {\n      this.close();\n    }\n\n    return osnArray;\n  }\n\n  public async read(stores: string | string[] = this._schema.getTypes()): Promise<Transaction> {\n    await this.open();\n    return this._db.transaction(stores, 'readonly');\n  }\n\n  public async write(stores: string | string[] = this._schema.getTypes()): Promise<Transaction> {\n    await this.open();\n    return this._db.transaction(stores, 'readwrite');\n  }\n\n  private onUpgradeNeeded(upgradeDb: UpgradeDB) {\n    this._logger.onUpgradeNeeded(upgradeDb);\n    this._schema.getTypes()\n      .filter(type => !upgradeDb.objectStoreNames.contains(type))\n      .forEach(type => {\n        const config = this._schema.getConfig(type);\n        upgradeDb.createObjectStore(type, { keyPath: config.key });\n      });\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/context/idb-context/idb-context.ts","import { NdbDocument } from '@normalized-db/core';\nimport { IdbContext } from '../../../context/idb-context/idb-context';\nimport { QueryConfig } from '../../model/query-config';\nimport { CountQueryRunner } from '../count-query-runner';\nimport { QueryRunner } from '../query-runner';\nimport { QueryRunnerFactory } from '../query-runner-factory';\nimport { SingleItemQueryRunner } from '../single-item-query-runner';\nimport { IdbCountQueryRunner } from './idb-count-query-runner';\nimport { IdbQueryRunner } from './idb-query-runner';\nimport { IdbSingleItemQueryRunner } from './idb-single-item-query-runner';\n\nexport class IdbQueryRunnerFactory implements QueryRunnerFactory {\n\n  private static _instance: IdbQueryRunnerFactory;\n\n  public static instance(context: IdbContext<any>): IdbQueryRunnerFactory {\n    if (!this._instance) {\n      this._instance = new IdbQueryRunnerFactory(context);\n    }\n\n    return this._instance;\n  }\n\n  private constructor(private readonly _context: IdbContext<any>) {\n  }\n\n  public countQueryRunner(config: QueryConfig): CountQueryRunner {\n    return new IdbCountQueryRunner(this._context, config);\n  }\n\n  public queryRunner<Result extends NdbDocument>(config: QueryConfig): QueryRunner<Result> {\n    return new IdbQueryRunner<Result>(this._context, config);\n  }\n\n  public singleItemQueryRunner<Result extends NdbDocument>(config: QueryConfig): SingleItemQueryRunner<Result> {\n    return new IdbSingleItemQueryRunner<Result>(this._context, config);\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/query/runner/idb-runner/idb-query-runner-factory.ts","import { IdbContext } from '../../../context/idb-context/index';\nimport { InvalidQueryRunnerStatusError } from '../../../error/index';\nimport { QueryConfig } from '../../model/query-config';\nimport { IdbBaseQueryRunner } from './idb-base-query-runner';\n\nexport class IdbCountQueryRunner extends IdbBaseQueryRunner implements IdbCountQueryRunner {\n\n  private result: number;\n\n  constructor(context: IdbContext<any>, config: QueryConfig) {\n    super(context, config);\n  }\n\n  /**\n   * @inheritDoc\n   *\n   * @returns {Promise<number>}\n   * @throws {InvalidQueryRunnerStatusError}\n   */\n  public async execute(): Promise<number> {\n    this.start();\n    this.result = 0;\n    const objectStore = (await this._context.read(this._config.type)).objectStore(this._config.type);\n    if (this._config.filter) {\n      const requests: Promise<void>[] = [];\n      let cursor = await objectStore.openCursor();\n      while (cursor && cursor.value) {\n        requests.push(this.processCursorValue(cursor.value));\n        cursor = await cursor.continue();\n      }\n      await Promise.all(requests);\n    } else {\n      this.result = await objectStore.count();\n    }\n\n    this.stop();\n    return this.result;\n  }\n\n  private async processCursorValue(value: any): Promise<void> {\n    let isValid: boolean;\n    if (this._config.filter.requiresDenormalization) {\n      const denormalizedData = await this._denormalizer.apply<any>(this._config.type, value, this._config.depth);\n      isValid = await this._config.filter.test(denormalizedData);\n    } else {\n      isValid = await this._config.filter.test(value);\n    }\n\n    if (isValid) {\n      this.result++;\n    }\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/query/runner/idb-runner/idb-count-query-runner.ts","import { NdbDocument } from '@normalized-db/core';\nimport { IdbContext } from '../../../context/idb-context/index';\nimport { InvalidQueryRunnerStatusError } from '../../../error/index';\nimport { ListResult } from '../../list-result/index';\nimport { QueryConfig } from '../../model/query-config';\nimport { Sorter } from '../../model/sorter';\nimport { QueryRunner } from '../query-runner';\nimport { IdbBaseDocumentQueryRunner } from './idb-base-document-query-runner';\n\nexport class IdbQueryRunner<Result extends NdbDocument>\n    extends IdbBaseDocumentQueryRunner<Result>\n    implements QueryRunner<Result> {\n\n  constructor(context: IdbContext<any>, config: QueryConfig) {\n    super(context, config);\n  }\n\n  /**\n   * @inheritDoc\n   *\n   * @returns {Promise<ListResult<Result>>}\n   * @throws {InvalidQueryRunnerStatusError}\n   */\n  public async execute(): Promise<ListResult<Result>> {\n    this.start();\n    let result: ListResult<Result>;\n    if (this._config.parent) {\n      result = (await this.findInParent()) as ListResult<Result>;\n    } else if (this._config.keys) {\n      result = await this.findAllByKeys(this._config.keys);\n    } else {\n      if (this._config.singleItem) {\n        console.warn(\n            'The query configuration has a key for a single-item-query but is run as list-query. The key will be ignored');\n      }\n\n      result = await this.findAll();\n    }\n\n    this.stop();\n    return result;\n  }\n\n  /**\n   * Find all items of a given type. Paging and filter will be applied as defined in the query-config.\n   *\n   * @param {string} type\n   * @returns {Promise<ListResult<Result>>}\n   */\n  private async findAll(type = this._config.type): Promise<ListResult<Result>> {\n    if (!this._transaction) {\n      this._transaction = await this._context.read(type);\n    }\n\n    const objectStore = this._transaction.objectStore(type);\n    const hasRange = this._config.offset > 0 || this._config.limit < Infinity;\n    const hasFilter = !!this._config.filter;\n    const isOrdered = !!this._config.orderBy;\n\n    if (!hasRange && !hasFilter) {\n      const data = await objectStore.getAll();\n      let denormalizedData = await this._denormalizer.applyAll<Result>(type, data, this._config.depth);\n      if (isOrdered) {\n        const sorter = new Sorter<Result>(this._config.orderBy);\n        denormalizedData = denormalizedData.sort(sorter.compare);\n      }\n      return this.createListResult(denormalizedData, data.length);\n\n    } else if (isOrdered) {\n      const items = [];\n      let cursor = await objectStore.openCursor();\n      while (cursor) {\n        const data = hasFilter && this._config.filter.requiresDenormalization\n            ? await this._denormalizer.apply<Result>(type, cursor.value, this._config.depth)\n            : cursor.value;\n        if (!hasFilter || await this._config.filter.test(data)) {\n          items.push(data);\n        }\n\n        cursor = await cursor.continue();\n      }\n\n      const denormalizedData = await this._denormalizer.applyAll<Result>(type, items, this._config.depth);\n      const sorter = new Sorter<Result>(this._config.orderBy);\n      let result = denormalizedData.sort(sorter.compare);\n      if (hasRange) {\n        result = result.slice(this._config.offset, this._config.offset + this._config.limit);\n      }\n      return this.createListResult(result, denormalizedData.length);\n\n    } else {\n      const items = [];\n      let index = 0;\n      let cursor = await objectStore.openCursor();\n      while (cursor) {\n        let denormalizedData, isValid: boolean;\n        if (hasFilter) {\n          if (this._config.filter.requiresDenormalization) {\n            denormalizedData = await this._denormalizer.apply<Result>(type, cursor.value, this._config.depth);\n            isValid = await this._config.filter.test(denormalizedData);\n          } else {\n            isValid = await this._config.filter.test(cursor.value);\n          }\n        } else {\n          isValid = true;\n        }\n\n        if (isValid) {\n          if (index >= this._config.offset && items.length < this._config.limit) {\n            if (!denormalizedData) {\n              denormalizedData = await this._denormalizer.apply<Result>(type, cursor.value, this._config.depth);\n            }\n\n            items.push(denormalizedData);\n          }\n\n          index++;\n        }\n\n        cursor = items.length < this._config.limit ? await cursor.continue() : null;\n      }\n\n      return this.createListResult(items, index);\n    }\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/query/runner/idb-runner/idb-query-runner.ts","import { isNull, NdbDocument } from '@normalized-db/core';\nimport { OrderByInvalidTypeError } from '../../error/order-by-invalid-type-error';\nimport { OrderByTypeMismatchError } from '../../error/order-by-type-mismatch-error';\nimport { ORDER_ASC } from './order';\nimport { OrderBy } from './order-by';\nimport { Orderable } from './orderable';\n\nexport class Sorter<Item extends NdbDocument> {\n\n  constructor(private readonly orderBy: OrderBy) {\n    this.compare = this.compare.bind(this);\n  }\n\n  public compare(item1: Item, item2: Item): number {\n    const fields = Object.keys(this.orderBy);\n    const fieldCount = fields.length;\n    let i = -1, result = 0;\n    while (++i < fieldCount && result === 0) {\n      result = this.compareFields(fields[i], item1, item2);\n    }\n\n    return result;\n  }\n\n  private compareFields(field: string, item1: Item, item2: Item): number {\n    const fieldParts = field.split('.');\n    const depth = fieldParts.length - 1;\n    let value1: Orderable, value2: Orderable;\n    if (depth <= 0) {\n      value1 = item1[field];\n      value2 = item2[field];\n    } else {\n      value1 = this.getNestedValue(fieldParts, depth, item1);\n      value2 = this.getNestedValue(fieldParts, depth, item2);\n    }\n\n    const isNull1 = isNull(value1);\n    const isNull2 = isNull(value2);\n    let result: number;\n    if (isNull1 && isNull2) {\n      result = 0;\n    } else if (!isNull1 && isNull2) {\n      result = 1;\n    } else if (isNull1 && !isNull2) {\n      result = -1;\n    } else {\n      result = this.compareValues(field, value1, value2);\n    }\n\n    return this.orderBy[field] === ORDER_ASC ? result : -result;\n  }\n\n  private getNestedValue(fieldParts: string[], depth: number, item: object): Orderable | undefined {\n    let currentDocument = item;\n    let i = 0;\n    do {\n      const fieldPart = fieldParts[i];\n      const currentType = typeof currentDocument;\n      if (currentType !== 'undefined' && currentType !== 'object') {\n        throw new OrderByInvalidTypeError(fieldPart, currentType);\n      }\n      currentDocument = currentDocument[fieldPart];\n    } while (++i < depth && currentDocument);\n\n    return currentDocument ? currentDocument[fieldParts[i]] : undefined;\n  }\n\n  private compareValues(field: string, value1: any, value2: any): number {\n    let result = 0;\n    const type1 = typeof value1, type2 = typeof value2;\n    if (type1 !== type2) {\n      throw new OrderByTypeMismatchError(field, type1, type2);\n    }\n\n    switch (type1) {\n      case 'string':\n        result = value1.localeCompare(value2);\n        break;\n\n      case 'number':\n        result = value1 - value2;\n        break;\n\n      case 'boolean':\n        if (value1 === value2) {\n          result = 0;\n        } else {\n          const b1 = value1 ? 2 : 0;\n          const b2 = value2 ? 1 : 0;\n          result = b1 - b2;\n        }\n        break;\n\n      case 'object':\n        if (value1 instanceof Date && value2 instanceof Date) {\n          result = value1.getTime() - value2.getTime();\n        } else if (Array.isArray(value1) && Array.isArray(value2)) {\n          result = value1.length - value2.length;\n        } else {\n          throw new OrderByInvalidTypeError(field, type1);\n        }\n        break;\n\n      default:\n        throw new OrderByInvalidTypeError(field, type1);\n    }\n\n    return result;\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/query/model/sorter.ts","export const ORDER_ASC = 1;\nexport const ORDER_DESC = -1;\n\nexport type ORDER = -1 | 1;\n\n\n\n// WEBPACK FOOTER //\n// ./src/query/model/order.ts","import { ListResult } from './list-result';\nimport { ListResultBuilder } from './list-result.builder';\n\nexport {\n  ListResult,\n  ListResultBuilder\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/query/list-result/index.ts","import { NdbDocument } from '@normalized-db/core';\nimport { ListResult } from './list-result';\n\nexport class ListResultBuilder<DbItem extends NdbDocument> {\n\n  protected _items: DbItem[];\n  protected _total: number;\n  protected _offset: number;\n  protected _limit: number;\n\n  public items(value: DbItem[]): this {\n    this._items = value;\n    return this;\n  }\n\n  public total(value: number): this {\n    this._total = value;\n    return this;\n  }\n\n  public offset(value: number): this {\n    this._offset = value;\n    return this;\n  }\n\n  public limit(value: number): this {\n    this._limit = value;\n    return this;\n  }\n\n  public build(): ListResult<DbItem> {\n    return new ListResult<DbItem>(this._items, this._total, this._offset, this._limit);\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/query/list-result/list-result.builder.ts","import { IdbContext } from '../../../context/idb-context/idb-context';\nimport { InvalidQueryConfigError } from '../../../error/invalid-query-config-error';\nimport { InvalidQueryRunnerStatusError } from '../../../error/invalid-query-runner-status-error';\nimport { QueryConfig } from '../../model/query-config';\nimport { SingleItemQueryRunner } from '../single-item-query-runner';\nimport { IdbBaseDocumentQueryRunner } from './idb-base-document-query-runner';\n\nexport class IdbSingleItemQueryRunner<Result>\n    extends IdbBaseDocumentQueryRunner<Result>\n    implements SingleItemQueryRunner<Result> {\n\n  constructor(context: IdbContext<any>, config: QueryConfig) {\n    super(context, config);\n  }\n\n  /**\n   * @inheritDoc\n   *\n   * @returns {Promise<Result>}\n   * @throws {InvalidQueryRunnerStatusError}\n   */\n  public async execute(): Promise<Result> {\n    this.start();\n    if (!this._config.singleItem) {\n      throw new InvalidQueryConfigError('Primary key for `singleExecute` is missing');\n    }\n\n    let result: Result;\n    if (this._config.parent) {\n      result = (await this.findInParent()) as Result;\n    } else {\n      result = await this.findByKey();\n    }\n\n    this.stop();\n    return result;\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/query/runner/idb-runner/idb-single-item-query-runner.ts","import { Depth, NdbDocument } from '@normalized-db/core';\nimport { Predicate } from '../model/predicate';\nimport { BaseQuery } from './base-query';\nimport { Filter } from './model/filter';\nimport { QueryConfig } from './model/query-config';\nimport { Queryable } from './queryable';\n\nexport class CountQuery<DbItem extends NdbDocument> extends BaseQuery<number> implements Queryable<number> {\n\n  private _filter?: Filter<DbItem>;\n  private _depth: number | Depth;\n\n  /**\n   * Filter items that shall be included into the result.\n   *\n   * @param {Predicate<DbItem>} predicate\n   * @param {boolean} requiresDenormalization\n   * @returns {CountQuery<DbItem>}\n   */\n  public filter(predicate: Predicate<DbItem>, requiresDenormalization?: boolean): this {\n    this._filter = new Filter<DbItem>(predicate, requiresDenormalization);\n    return this;\n  }\n\n  /**\n   * Set the `Depth` determining how far an object has to be denormalized. This is only used if the used `filter`\n   * depends on denormalization.\n   *\n   * @param {number|Depth} depth\n   * @returns {CountQuery<DbItem>}\n   */\n  public depth(depth: number | Depth): this {\n    this._depth = depth;\n    return this;\n  }\n\n  /**\n   * @inheritDoc\n   *\n   * @param {boolean} noCache\n   * @returns {Promise<number>}\n   */\n  public async result(noCache = false): Promise<number> {\n    if (this._cachedResult && !noCache) {\n      return this._cachedResult;\n    }\n\n    const runner = this._context.queryRunnerFactory().countQueryRunner(this.getQueryConfig());\n    await this._context.open();\n    this._cachedResult = await runner.execute();\n    this.autoClose();\n    return this._cachedResult;\n  }\n\n  protected getQueryConfig(): QueryConfig {\n    return Object.assign({\n      filter: this._filter,\n      depth: this._depth\n    }, super.getQueryConfig());\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/query/count-query.ts","import { Depth, NdbDocument, RefsUtility, ValidKey } from '@normalized-db/core';\nimport { EmptyResultError } from '../error/empty-result-error';\nimport { Parent } from '../model/parent';\nimport { Predicate } from '../model/predicate';\nimport { BaseQuery } from './base-query';\nimport { ListResult } from './list-result/list-result';\nimport { MapFunc } from './map-reduce/map-func';\nimport { Mapper } from './map-reduce/mapper';\nimport { ReducerFunc } from './map-reduce/reduce-func';\nimport { Reducer } from './map-reduce/reducer';\nimport { Filter } from './model/filter';\nimport { OrderBy } from './model/order-by';\nimport { QueryConfig } from './model/query-config';\nimport { Queryable } from './queryable';\n\nexport class Query<DbItem extends NdbDocument>\n    extends BaseQuery<ListResult<DbItem>>\n    implements Queryable<ListResult<DbItem>> {\n\n  private _offset?: number;\n  private _limit?: number;\n  private _keys?: ValidKey[];\n  private _filter?: Filter<DbItem>;\n  private _orderBy?: OrderBy;\n  private _parent?: Parent;\n  private _depth: number | Depth;\n\n  /**\n   * Index of the first item that shall be included into the result.\n   *\n   * @param {number} offset\n   * @returns {Query<DbItem>}\n   */\n  public offset(offset: number): this {\n    this._offset = Math.max(offset, 0);\n    return this;\n  }\n\n  /**\n   * Maximum length of the result.\n   *\n   * @param {number} limit\n   * @returns {Query<DbItem>}\n   */\n  public limit(limit: number): this {\n    this._limit = limit;\n    return this;\n  }\n\n  /**\n   * Filter the result by keys.\n   *\n   * @param {ValidKey[]} keys\n   * @returns {Query<DbItem>}\n   */\n  public keys(keys: ValidKey[]): this {\n    this._keys = keys;\n    return this;\n  }\n\n  /**\n   * Filter items that shall be included into the result.\n   *\n   * @param {Predicate<DbItem>} predicate\n   * @param {boolean} requiresDenormalization\n   * @returns {Query<DbItem>}\n   */\n  public filter(predicate: Predicate<DbItem>, requiresDenormalization?: boolean): this {\n    this._filter = new Filter<DbItem>(predicate, requiresDenormalization);\n    return this;\n  }\n\n  /**\n   * Define sort orders for the items in the result. Each key of `orderBy` must equal the name of a field of `DbItem`,\n   * allowed values are numbers, booleans, strings, Dates and Arrays.\n   * Sorting by nested documents is also possible by separating the fields by a dot,\n   * e.g. `{ subDocument.foo: ORDER_ASC }`, which would sort the outer documents by the `foo`-field of `subDocument`.\n   * If the key points to an array, then the items will be sorted by the length of that array.\n   *\n   * @param {OrderBy} orderBy\n   * @returns {this}\n   */\n  public orderBy(orderBy: OrderBy): this {\n    this._orderBy = orderBy;\n    return this;\n  }\n\n  /**\n   * Set the parent-object which is supposed to contain a reference on the object of interest.\n   * The `type` argument of the queries constructor determines the type of the parent.\n   *\n   * @param {ValidKey} key\n   * @param {string} field\n   * @returns {Query<DbItem>}\n   */\n  public nested(key: ValidKey, field: string): this {\n    this._parent = new Parent(this._type, key, field);\n    return this;\n  }\n\n  /**\n   * Filter by reverse keys set in `sourceItem._refs[type]`. Uses the queries `keys`-filter hence `keys(…)` and\n   * `reverse(…)` must not be used within in the same query.\n   *\n   * @param {NdbDocument} sourceItem\n   * @returns {Query<DbItem>}\n   */\n  public reverse(sourceItem: NdbDocument): this {\n    this._keys = RefsUtility.getAll(sourceItem, this._type);\n    return this;\n  }\n\n  /**\n   * Set the `Depth` determining how far an object has to be denormalized.\n   *\n   * @param {number|Depth} depth\n   * @returns {Query<DbItem>}\n   */\n  public depth(depth: number | Depth): this {\n    this._depth = depth;\n    return this;\n  }\n\n  /**\n   * Manipulate every item in the result.\n   *\n   * @param {MapFunc<DbItem, Result>} callback\n   * @returns {Mapper<DbItem, Result>}\n   */\n  public map<Result>(callback: MapFunc<DbItem, Result>): Mapper<DbItem, Result> {\n    return new Mapper<DbItem, Result>(this, callback);\n  }\n\n  /**\n   * Reduce the result.\n   *\n   * @param {ReducerFunc<DbItem, Result>} callback\n   * @param {Result} initialValue\n   * @returns {Reducer<DbItem, void, Result>}\n   */\n  public reduce<Result>(callback: ReducerFunc<DbItem, Result>, initialValue?: Result): Reducer<DbItem, DbItem, Result> {\n    return new Reducer<DbItem, DbItem, Result>(this, null, callback, initialValue);\n  }\n\n  /**\n   * @inheritDoc\n   *\n   * @param {boolean} noCache\n   * @returns {Promise<ListResult<DbItem>>}\n   */\n  public async result(noCache = false): Promise<ListResult<DbItem>> {\n    if (this._cachedResult && !noCache) {\n      return this._cachedResult;\n    }\n\n    const runner = this._context.queryRunnerFactory().queryRunner<DbItem>(this.getQueryConfig());\n    await this._context.open();\n    this._cachedResult = (await runner.execute()) || new ListResult<DbItem>();\n    this.autoClose();\n    return this._cachedResult;\n  }\n\n  /**\n   * Number of items in the result. If `noCache` is `true` the query will be re-run.\n   *\n   * @param {boolean} noCache\n   * @returns {Promise<number>}\n   */\n  public async count(noCache = false): Promise<number> {\n    return (await this.result(noCache)).total;\n  }\n\n  /**\n   * Returns `true` if `Query.count(…)` returns a value greater than zero.\n   * If `noCache` is `true` the query will be re-run.\n   *\n   * @param {boolean} noCache\n   * @returns {Promise<boolean>}\n   */\n  public async isEmpty(noCache = false): Promise<boolean> {\n    return (await this.count(noCache)) === 0;\n  }\n\n  /**\n   * Returns the first item in the result. If the result is empty an `EmptyResultError` will be thrown.\n   * If `noCache` is `true` the query will be re-run.\n   *\n   * @param {boolean} noCache\n   * @returns {Promise<DbItem>}\n   * @throws {EmptyResultError}\n   */\n  public async first(noCache = false): Promise<DbItem> {\n    if (await this.isEmpty(noCache)) {\n      throw new EmptyResultError();\n    }\n\n    return this._cachedResult[0];\n  }\n\n  /**\n   * Returns the first item in the result. If the result is empty the `defaultResult` will be returned instead.\n   * If `noCache` is `true` the query will be re-run.\n   *\n   * @param {DbItem} defaultResult\n   * @param {boolean} noCache\n   * @returns {Promise<DbItem|null>}\n   */\n  public async firstOrDefault(defaultResult: DbItem = null, noCache = false): Promise<DbItem | null> {\n    return (await this.isEmpty(noCache)) ? defaultResult : this._cachedResult[0];\n  }\n\n  protected getQueryConfig(): QueryConfig {\n    return Object.assign({\n      offset: this._offset || QueryConfig.DEFAULT_OFFSET,\n      limit: this._limit || QueryConfig.DEFAULT_LIMIT,\n      keys: this._keys,\n      filter: this._filter,\n      orderBy: this._orderBy,\n      parent: this._parent,\n      depth: this._depth\n    }, super.getQueryConfig());\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/query/query.ts","import { NdbDocument } from '@normalized-db/core';\nimport { ListResult } from '../list-result/list-result';\nimport { ListResultBuilder } from '../list-result/list-result.builder';\nimport { Query } from '../query';\nimport { Queryable } from '../queryable';\nimport { MapFunc } from './map-func';\nimport { ReducerFunc } from './reduce-func';\nimport { Reducer } from './reducer';\n\nexport class Mapper<QueryResult extends NdbDocument, Result> implements Queryable<ListResult<Result>> {\n\n  private _cachedResult?: ListResult<Result>;\n\n  constructor(public readonly query: Query<QueryResult>,\n              private readonly _callback: MapFunc<QueryResult, Result>) {\n  }\n\n  /**\n   * Reduce the result.\n   *\n   * @param {ReducerFunc<Result, ReducerResult>} callback\n   * @param {Result} initialValue\n   * @returns {Reducer<Result, ReducerResult>}\n   */\n  public reduce<ReducerResult>(callback: ReducerFunc<Result, ReducerResult>,\n                               initialValue?: ReducerResult): Reducer<QueryResult, Result, ReducerResult> {\n    return new Reducer<QueryResult, Result, ReducerResult>(this.query, this, callback, initialValue);\n  }\n\n  /**\n   * @inheritDoc\n   *\n   * @param {boolean} noCache\n   * @returns {Promise<ListResult<Result>>}\n   */\n  public async result(noCache = false): Promise<ListResult<Result>> {\n    if (this._cachedResult && !noCache) {\n      return this._cachedResult;\n    }\n\n    const parentResult = await this.query.result(noCache);\n    return this._cachedResult = new ListResultBuilder<Result>()\n        .items(await Promise.all(parentResult.items.map(this._callback)))\n        .total(parentResult.total)\n        .offset(parentResult.offset)\n        .limit(parentResult.limit)\n        .build();\n  }\n\n  /**\n   * @{inheritDoc}\n   *\n   * @returns {Promise<void>}\n   */\n  public async invalidateCachedResult(): Promise<void> {\n    await this.query.invalidateCachedResult();\n    this._cachedResult = null;\n  }\n\n  /**\n   * Returns the result of the underlying query. If `noCache` is `true` the query will be re-run.\n   *\n   * @param {boolean} noCache\n   * @returns {Promise<ListResult<QueryResult>>}\n   */\n  public queryResult(noCache = false): Promise<ListResult<QueryResult>> {\n    return this.query.result(noCache);\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/query/map-reduce/mapper.ts","import { Depth, ValidKey } from '@normalized-db/core';\nimport { NdbDocument } from '@normalized-db/core/lib/src/model/ndb-document';\nimport { Parent } from '../../model/parent';\nimport { Filter } from './filter';\nimport { OrderBy } from './order-by';\n\nexport class QueryConfig {\n\n  public static readonly DEFAULT_OFFSET = 0;\n  public static readonly DEFAULT_LIMIT = Infinity;\n\n  // #region General\n\n  public type: string;\n  public parent?: Parent;\n  public depth?: number | Depth;\n\n  // #endregion\n\n  // #region single item\n\n  public singleItem?: ValidKey;\n\n  // #endregion\n\n  // #region list\n\n  public offset? = QueryConfig.DEFAULT_OFFSET;\n  public limit? = QueryConfig.DEFAULT_LIMIT;\n  public keys?: ValidKey[];\n  public filter?: Filter<NdbDocument>;\n  public orderBy?: OrderBy;\n\n  // #endregion\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/query/model/query-config.ts","import { Depth, isNull, NdbDocument, NotFoundError, RefsUtility, ValidKey } from '@normalized-db/core';\nimport { Context } from '../context/context';\nimport { ChildNotFoundError } from '../error/child-not-found-error';\nimport { RefNotFoundError } from '../error/ref-not-found-error';\nimport { Parent } from '../model/parent';\nimport { BaseQuery } from './base-query';\nimport { QueryConfig } from './model/query-config';\nimport { Queryable } from './queryable';\n\nexport class SingleItemQuery<DbItem extends NdbDocument>\n    extends BaseQuery<DbItem | null>\n    implements Queryable<DbItem | null> {\n\n  private _parent?: Parent;\n  private _default?: DbItem = null;\n  private _depth: number | Depth;\n\n  constructor(_context: Context<any>,\n              _autoCloseContext = true,\n              _type: string,\n              private readonly _key: ValidKey) {\n    super(_context, _autoCloseContext, _type);\n  }\n\n  /**\n   * Set the parent-object which is supposed to contain a reference on the object of interest.\n   * The `type` argument of the queries constructor determines the type of the parent.\n   *\n   * @param {ValidKey} key\n   * @param {string} field\n   * @returns {SingleItemQuery<DbItem|null>}\n   */\n  public nested(key: ValidKey, field: string): this {\n    this._parent = new Parent(this._type, key, field);\n    return this;\n  }\n\n  /**\n   * Ensures `sourceItem` has a reverse reference an item of `type` with the `key`, throws `RefNotFoundError`\n   * otherwise.\n   *\n   * @param sourceItem\n   * @returns {SingleItemQuery<DbItem|null>}\n   * @throws {RefNotFoundError}\n   */\n  public reverse(sourceItem: NdbDocument): this {\n    if (!RefsUtility.hasKey(sourceItem, this._type, this._key)) {\n      throw new RefNotFoundError(this._type, this._key);\n    }\n    return this;\n  }\n\n  /**\n   * Set the `Depth` determining how far an object has to be denormalized.\n   *\n   * @param {number|Depth} depth\n   * @returns {SingleItemQuery<DbItem|null>}\n   */\n  public depth(depth: number | Depth): this {\n    this._depth = depth;\n    return this;\n  }\n\n  /**\n   * Set the default value to be returned when the item is not found in the given type or parent.\n   *\n   * @param {DbItem} value\n   * @returns {SingleItemQuery<DbItem|null>}\n   */\n  public defaultValue(value: DbItem): this {\n    this._default = value;\n    return this;\n  }\n\n  /**\n   * @inheritDoc\n   *\n   * If no object with the given key was found this will either throw a `NotFoundError` or, if a `parent` was used`,\n   * a `ChildNotFoundError`. If you want to use a default value instead, use `#orDefault(…)`.\n   *\n   * @param {boolean} noCache\n   * @returns {Promise<DbItem>}\n   * @throws {NotFoundError} when now `defaultValue` is available\n   * @throws {ChildNotFoundError} when no `defaultValue` is available and a `parent`-item was used\n   */\n  public async result(noCache = false): Promise<DbItem> {\n    const result = await this.orDefault(noCache);\n    if (!result) {\n      if (this._parent) {\n        throw new ChildNotFoundError(this._parent, this._key);\n      } else {\n        throw new NotFoundError(this._type, this._key);\n      }\n    }\n\n    return result;\n  }\n\n  /**\n   * Fetch the query's result and return `defaultValue` if not item was found instead of throwing an error.\n   *\n   * @param {boolean} noCache\n   * @returns {Promise<DbItem | null>}\n   */\n  public async orDefault(noCache = false): Promise<DbItem | null> {\n    if (this._cachedResult && !noCache) {\n      return this._cachedResult;\n    }\n\n    const runner = this._context.queryRunnerFactory().singleItemQueryRunner<DbItem>(this.getQueryConfig());\n    await this._context.open();\n    this._cachedResult = (await runner.execute()) || this._default;\n    this.autoClose();\n    return this._cachedResult;\n  }\n\n  /**\n   * Check whether an object was found or not. Returns `true` if the result is defined and not equal to the default.\n   * If `noCache` is `true` the query will be re-run.\n   *\n   * @param {boolean} noCache\n   * @returns {Promise<boolean>}\n   */\n  public async hasResult(noCache = false): Promise<boolean> {\n    await this.result(noCache);\n    const key = this.schema.getConfig(this._type).key;\n    return !isNull(this._cachedResult) && this._cachedResult[key] !== this._default[key];\n  }\n\n  protected getQueryConfig(): QueryConfig {\n    return Object.assign({\n      singleItem: this._key,\n      parent: this._parent,\n      depth: this._depth\n    }, super.getQueryConfig());\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/query/single-item-query.ts","import {\n  EventType,\n  ILogConfig,\n  isNull,\n  IStoreLogConfig,\n  LogMode,\n  StoreLogBuilder,\n  ValidKey\n} from '@normalized-db/core';\nimport { DataStoreTypes } from '../../model/data-store-types';\n\nexport class LogConfig<Types extends DataStoreTypes> implements ILogConfig {\n\n  private readonly _defaultConfig: IStoreLogConfig;\n  private readonly _types = new Map<Types, IStoreLogConfig>();\n\n  public constructor(types: Map<Types, IStoreLogConfig>, defaultConfig?: IStoreLogConfig) {\n    this._types = types;\n    this._defaultConfig = defaultConfig || new StoreLogBuilder().build();\n\n    this._types.forEach(config => {\n      if (isNull(config.mode)) {\n        config.mode = this._defaultConfig.mode;\n      }\n\n      if ((!config.eventSelection || (Array.isArray(config.eventSelection) && config.eventSelection.length === 0)) &&\n          this._defaultConfig.eventSelection) {\n        config.eventSelection = this._defaultConfig.eventSelection;\n      }\n\n      if ((!config.keys || config.keys.length === 0) && this._defaultConfig.keys) {\n        config.keys = this._defaultConfig.keys;\n      }\n    });\n  }\n\n  public hasType(type: Types): boolean {\n    return this._types.has(type);\n  }\n\n  public getConfig(type: Types): IStoreLogConfig {\n    return this._types.get(type) || this._defaultConfig;\n  }\n\n  public getLogMode(type: Types, orDefault?: LogMode.Disabled): LogMode {\n    const config = this.getConfig(type);\n    return config && config.mode ? config.mode : orDefault;\n  }\n\n  public getEventTypes(type: Types, orDefault?: EventType[]): EventType[] {\n    let types: EventType[];\n    const config = this.getConfig(type);\n    if (config) {\n      const selection = Array.isArray(config.eventSelection) ? config.eventSelection : [config.eventSelection];\n      types = selection.length > 0 ? selection : orDefault;\n    }\n    return types;\n  }\n\n  public getKeys(type: Types, orDefault?: ValidKey[]): ValidKey[] {\n    let keys: ValidKey[];\n    const config = this.getConfig(type);\n    if (config) {\n      keys = config.keys;\n    }\n    return keys && keys.length > 0 ? keys : orDefault;\n  }\n\n  public isLoggingEnabled(type: Types, eventType?: EventType, key?: ValidKey): boolean {\n    const logConfig = this.getConfig(type);\n    let isEnabled = logConfig && logConfig.mode !== LogMode.Disabled;\n    if (isEnabled && eventType && logConfig.eventSelection) {\n      isEnabled = Array.isArray(logConfig.eventSelection)\n          ? logConfig.eventSelection.length === 0 || logConfig.eventSelection.indexOf(eventType) >= 0\n          : logConfig.eventSelection === eventType;\n    }\n\n    if (isEnabled && !isNull(key) && logConfig.keys && logConfig.keys.length > 0) {\n      isEnabled = logConfig.keys.indexOf(key) >= 0;\n    }\n\n    return isEnabled;\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/logging/config/log-config.ts","export * from './command';\nexport * from './context';\nexport * from './data-store';\nexport * from './error';\nexport * from './event';\nexport * from './logging';\nexport * from './model';\nexport * from './query';\nexport * from './utility';\n\n\n\n// WEBPACK FOOTER //\n// ./src/index.ts","import { BaseCommand } from './base-command';\nimport { ClearCommand } from './clear-command';\nimport { Command } from './command';\nimport { CommandFactory } from './command-factory';\nimport { CreateCommand } from './create-command';\nimport { PutCommand } from './put-command';\nimport { RemoveCommand } from './remove-command';\nimport { UpdateCommand } from './update-command';\n\nexport * from './idb-command';\n\nexport {\n  CommandFactory,\n  Command,\n  CreateCommand,\n  UpdateCommand,\n  PutCommand,\n  RemoveCommand,\n  ClearCommand,\n  BaseCommand\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/command/index.ts","import { IdbBaseCommand } from './idb-base-command';\nimport { IdbBaseUpdateCommand } from './idb-base-update-command';\nimport { IdbBaseWriteCommand } from './idb-base-write-command';\nimport { IdbClearCommand } from './idb-clear-command';\nimport { IdbCommandFactory } from './idb-command-factory';\nimport { IdbCreateCommand } from './idb-create-command';\nimport { IdbPutCommand } from './idb-put-command';\nimport { IdbRemoveCommand } from './idb-remove-command';\nimport { IdbUpdateCommand } from './idb-update-command';\n\nexport {\n  IdbCommandFactory,\n  IdbBaseCommand,\n  IdbBaseWriteCommand,\n  IdbCreateCommand,\n  IdbBaseUpdateCommand,\n  IdbUpdateCommand,\n  IdbPutCommand,\n  IdbRemoveCommand,\n  IdbClearCommand\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/command/idb-command/index.ts","export class InvalidQueryRunnerStatusError extends Error {\n\n  constructor(reason: string) {\n    super(`Query runner is in a invalid state. ${reason}`);\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/error/invalid-query-runner-status-error.ts","export class InvalidQueryRunnerRegistration extends Error {\n\n  constructor(key: string, type: 'already-registered' | 'missing') {\n    super(type === 'already-registered'\n      ? `A query runner with \"key ${key}\" is already registered`\n      : `No query runner with key \"${key}\" found`);\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/error/query-runner-registered-error.ts","import { isNull, MissingKeyError, NotFoundError, ValidKey } from '@normalized-db/core';\nimport { EmptyInputError } from '../../error/empty-input-error';\nimport { SetCommand } from '../set-command';\nimport { IdbBaseUpdateCommand } from './idb-base-update-command';\n\nexport class IdbSetCommand<T extends object> extends IdbBaseUpdateCommand<T> implements SetCommand<T> {\n\n  /**\n   * @inheritDoc\n   *\n   * @param {ValidKey} key\n   * @param {T|T[]} data\n   * @returns {Promise<boolean>}\n   * @throws {MissingKeyError}\n   * @throws {NotFoundError}\n   */\n  public async execute(key: ValidKey, data: T): Promise<boolean> {\n    if (isNull(data)) {\n      throw new EmptyInputError('set');\n    }\n\n    data[this._typeConfig.key] = key;\n\n    return super.executeHelper(data, true);\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/command/idb-command/idb-set-command.ts","import { Context } from './context';\nimport { ContextBuilder } from './context.builder';\n\nexport * from './idb-context';\n\nexport {\n  Context,\n  ContextBuilder\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/context/index.ts","import { IdbConfig } from './idb-config';\nimport { IdbContext } from './idb-context';\nimport { IdbContextBuilder } from './idb-context.builder';\n\nexport {\n  IdbConfig,\n  IdbContext,\n  IdbContextBuilder\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/context/idb-context/index.ts","'use strict';\n\n(function() {\n  function toArray(arr) {\n    return Array.prototype.slice.call(arr);\n  }\n\n  function promisifyRequest(request) {\n    return new Promise(function(resolve, reject) {\n      request.onsuccess = function() {\n        resolve(request.result);\n      };\n\n      request.onerror = function() {\n        reject(request.error);\n      };\n    });\n  }\n\n  function promisifyRequestCall(obj, method, args) {\n    var request;\n    var p = new Promise(function(resolve, reject) {\n      if (method === 'openCursor' && args && args[1] && args[1] === 'nextunique') {\n        args[1] = 'next';\n      }\n      request = obj[method].apply(obj, args);\n      promisifyRequest(request).then(resolve, reject);\n    });\n\n    p.request = request;\n    return p;\n  }\n\n  function promisifyCursorRequestCall(obj, method, args) {\n    var p = promisifyRequestCall(obj, method, args);\n    return p.then(function(value) {\n      if (!value) return;\n      return new Cursor(value, p.request);\n    });\n  }\n\n  function proxyProperties(ProxyClass, targetProp, properties) {\n    properties.forEach(function(prop) {\n      Object.defineProperty(ProxyClass.prototype, prop, {\n        get: function() {\n          return this[targetProp][prop];\n        },\n        set: function(val) {\n          this[targetProp][prop] = val;\n        }\n      });\n    });\n  }\n\n  function proxyRequestMethods(ProxyClass, targetProp, Constructor, properties) {\n    properties.forEach(function(prop) {\n      if (!(prop in Constructor.prototype)) return;\n      ProxyClass.prototype[prop] = function() {\n        return promisifyRequestCall(this[targetProp], prop, arguments);\n      };\n    });\n  }\n\n  function proxyMethods(ProxyClass, targetProp, Constructor, properties) {\n    properties.forEach(function(prop) {\n      if (!(prop in Constructor.prototype)) return;\n      ProxyClass.prototype[prop] = function() {\n        return this[targetProp][prop].apply(this[targetProp], arguments);\n      };\n    });\n  }\n\n  function proxyCursorRequestMethods(ProxyClass, targetProp, Constructor, properties) {\n    properties.forEach(function(prop) {\n      if (!(prop in Constructor.prototype)) return;\n      ProxyClass.prototype[prop] = function() {\n        return promisifyCursorRequestCall(this[targetProp], prop, arguments);\n      };\n    });\n  }\n\n  function Index(index) {\n    this._index = index;\n  }\n\n  proxyProperties(Index, '_index', [\n    'name',\n    'keyPath',\n    'multiEntry',\n    'unique'\n  ]);\n\n  proxyRequestMethods(Index, '_index', IDBIndex, [\n    'get',\n    'getKey',\n    'getAll',\n    'getAllKeys',\n    'count'\n  ]);\n\n  proxyCursorRequestMethods(Index, '_index', IDBIndex, [\n    'openCursor',\n    'openKeyCursor'\n  ]);\n\n  function Cursor(cursor, request) {\n    this._cursor = cursor;\n    this._request = request;\n  }\n\n  proxyProperties(Cursor, '_cursor', [\n    'direction',\n    'key',\n    'primaryKey',\n    'value'\n  ]);\n\n  proxyRequestMethods(Cursor, '_cursor', IDBCursor, [\n    'update',\n    'delete'\n  ]);\n\n  // proxy 'next' methods\n  ['advance', 'continue', 'continuePrimaryKey'].forEach(function(methodName) {\n    if (!(methodName in IDBCursor.prototype)) return;\n    Cursor.prototype[methodName] = function() {\n      var cursor = this;\n      var args = arguments;\n      return Promise.resolve().then(function() {\n        cursor._cursor[methodName].apply(cursor._cursor, args);\n        return promisifyRequest(cursor._request).then(function(value) {\n          if (!value) return;\n          return new Cursor(value, cursor._request);\n        });\n      });\n    };\n  });\n\n  function ObjectStore(store) {\n    this._store = store;\n  }\n\n  ObjectStore.prototype.createIndex = function() {\n    return new Index(this._store.createIndex.apply(this._store, arguments));\n  };\n\n  ObjectStore.prototype.index = function() {\n    return new Index(this._store.index.apply(this._store, arguments));\n  };\n\n  proxyProperties(ObjectStore, '_store', [\n    'name',\n    'keyPath',\n    'indexNames',\n    'autoIncrement'\n  ]);\n\n  proxyRequestMethods(ObjectStore, '_store', IDBObjectStore, [\n    'put',\n    'add',\n    'delete',\n    'clear',\n    'get',\n    'getAll',\n    'getKey',\n    'getAllKeys',\n    'count'\n  ]);\n\n  proxyCursorRequestMethods(ObjectStore, '_store', IDBObjectStore, [\n    'openCursor',\n    'openKeyCursor'\n  ]);\n\n  proxyMethods(ObjectStore, '_store', IDBObjectStore, [\n    'deleteIndex'\n  ]);\n\n  function Transaction(idbTransaction) {\n    this._tx = idbTransaction;\n    this.complete = new Promise(function(resolve, reject) {\n      idbTransaction.oncomplete = function() {\n        resolve();\n      };\n      idbTransaction.onerror = function() {\n        reject(idbTransaction.error);\n      };\n      idbTransaction.onabort = function() {\n        reject(idbTransaction.error);\n      };\n    });\n  }\n\n  Transaction.prototype.objectStore = function() {\n    return new ObjectStore(this._tx.objectStore.apply(this._tx, arguments));\n  };\n\n  proxyProperties(Transaction, '_tx', [\n    'objectStoreNames',\n    'mode'\n  ]);\n\n  proxyMethods(Transaction, '_tx', IDBTransaction, [\n    'abort'\n  ]);\n\n  function UpgradeDB(db, oldVersion, transaction) {\n    this._db = db;\n    this.oldVersion = oldVersion;\n    this.transaction = new Transaction(transaction);\n  }\n\n  UpgradeDB.prototype.createObjectStore = function() {\n    return new ObjectStore(this._db.createObjectStore.apply(this._db, arguments));\n  };\n\n  proxyProperties(UpgradeDB, '_db', [\n    'name',\n    'version',\n    'objectStoreNames'\n  ]);\n\n  proxyMethods(UpgradeDB, '_db', IDBDatabase, [\n    'deleteObjectStore',\n    'close'\n  ]);\n\n  function DB(db) {\n    this._db = db;\n  }\n\n  DB.prototype.transaction = function() {\n    return new Transaction(this._db.transaction.apply(this._db, arguments));\n  };\n\n  proxyProperties(DB, '_db', [\n    'name',\n    'version',\n    'objectStoreNames'\n  ]);\n\n  proxyMethods(DB, '_db', IDBDatabase, [\n    'close'\n  ]);\n\n  // Add cursor iterators\n  // TODO: remove this once browsers do the right thing with promises\n  ['openCursor', 'openKeyCursor'].forEach(function(funcName) {\n    [ObjectStore, Index].forEach(function(Constructor) {\n      Constructor.prototype[funcName.replace('open', 'iterate')] = function() {\n        var args = toArray(arguments);\n        var callback = args[args.length - 1];\n        var nativeObject = this._store || this._index;\n        var request = nativeObject[funcName].apply(nativeObject, args.slice(0, -1));\n        request.onsuccess = function() {\n          callback(request.result);\n        };\n      };\n    });\n  });\n\n  // polyfill getAll\n  [Index, ObjectStore].forEach(function(Constructor) {\n    if (Constructor.prototype.getAll) return;\n    Constructor.prototype.getAll = function(query, count) {\n      var instance = this;\n      var items = [];\n\n      return new Promise(function(resolve) {\n        instance.iterateCursor(query, function(cursor) {\n          if (!cursor) {\n            resolve(items);\n            return;\n          }\n          items.push(cursor.value);\n\n          if (count !== undefined && items.length == count) {\n            resolve(items);\n            return;\n          }\n          cursor.continue();\n        });\n      });\n    };\n  });\n\n  var exp = {\n    open: function(name, version, upgradeCallback) {\n      var p = promisifyRequestCall(indexedDB, 'open', [name, version]);\n      var request = p.request;\n\n      request.onupgradeneeded = function(event) {\n        if (upgradeCallback) {\n          upgradeCallback(new UpgradeDB(request.result, event.oldVersion, request.transaction));\n        }\n      };\n\n      return p.then(function(db) {\n        return new DB(db);\n      });\n    },\n    delete: function(name) {\n      return promisifyRequestCall(indexedDB, 'deleteDatabase', [name]);\n    }\n  };\n\n  if (typeof module !== 'undefined') {\n    module.exports = exp;\n    module.exports.default = module.exports;\n  }\n  else {\n    self.idb = exp;\n  }\n}());\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/idb/lib/idb.js\n// module id = 71\n// module chunks = 0","import { isNull } from '@normalized-db/core';\nimport { DataStoreTypes } from '../../model/data-store-types';\nimport { ContextBuilder } from '../context.builder';\nimport { IdbConfig } from './idb-config';\nimport { IdbContext } from './idb-context';\n\nexport class IdbContextBuilder<Types extends DataStoreTypes> extends ContextBuilder<Types, IdbContext<Types>> {\n\n  protected _dbName: string;\n  protected _dbVersion: number;\n  protected _dbUpgrade: (UpgradeDB) => void;\n\n  public dbName(value: string) {\n    this._dbName = value;\n    return this;\n  }\n\n  public dbVersion(value: number) {\n    this._dbVersion = value;\n    return this;\n  }\n\n  public dbUpgrade(value: (UpgradeDB) => void) {\n    this._dbUpgrade = value;\n    return this;\n  }\n\n  public build(): IdbContext<Types> {\n    if (!this.isValid()) {\n      throw new Error(\n          'Configuration for IndexedDb-Context is incomplete. Please provide a `name` and a `version` greater than 0.');\n    }\n\n    const config: IdbConfig = {\n      name: this._dbName,\n      version: this._dbVersion,\n      upgrade: this._dbUpgrade\n    };\n\n    const context = new IdbContext<Types>(this._schema, this._normalizerBuilder, this._denormalizerBuilder, config);\n    if (this._enableLogging) {\n      context.logger().enable(this._enableLogging);\n    }\n\n    return context;\n  }\n\n  protected isValid(): boolean {\n    return this._dbName &&\n        this._dbName.length > 0 &&\n        !isNull(this._dbVersion) &&\n        this._dbVersion > 0;\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/context/idb-context/idb-context.builder.ts","import { DataStore } from './data-store';\nimport { IDataStore } from './data-store-interface';\n\nexport * from './options';\n\nexport {\n  IDataStore,\n  DataStore\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/data-store/index.ts","import { NdbDocument, ValidKey } from '@normalized-db/core';\nimport { Context } from '../context/context';\nimport { EventPipe } from '../event/utility/event-pipe';\nimport { DataStoreTypes } from '../model/data-store-types';\nimport { CountQuery } from '../query/count-query';\nimport { Query } from '../query/query';\nimport { SingleItemQuery } from '../query/single-item-query';\nimport { IDataStore } from './data-store-interface';\nimport { BaseOptions } from './options/base-options';\nimport { ClearOptions } from './options/clear-options';\nimport { CountOptions } from './options/count-options';\nimport { CreateOptions } from './options/create-options';\nimport { FindByKeyOptions } from './options/find-by-key-options';\nimport { FindOptions } from './options/find-options';\nimport { PutOptions } from './options/put-options';\nimport { RemoveOptions } from './options/remove-options';\nimport { SetOptions } from './options/set-options';\nimport { UpdateOptions } from './options/update-options';\n\nexport class DataStore<Types extends DataStoreTypes> implements IDataStore<Types> {\n\n  public readonly eventPipe: EventPipe<Types>;\n\n  constructor(private readonly _context: Context<Types>, private readonly _autoCloseContext = true) {\n    this.eventPipe = this._context.eventPipe;\n  }\n\n  /**\n   * @inheritDoc\n   *\n   * @param {Types} type\n   * @param {CountOptions} options\n   * @returns {CountQuery<Item>}\n   */\n  public count<Item extends NdbDocument>(type: Types, options?: CountOptions): CountQuery<Item> {\n    return new CountQuery<Item>(this._context, this.isAutoClose(options), type);\n  }\n\n  /**\n   * @inheritDoc\n   *\n   * @param {Types} type\n   * @param {FindOptions} options\n   * @returns {Query<Result>}\n   * @throws {InvalidTypeError}\n   */\n  public find<Result extends NdbDocument>(type: Types, options?: FindOptions): Query<Result> {\n    return new Query<Result>(this._context, this.isAutoClose(options), type);\n  }\n\n  /**\n   * @inheritDoc\n   *\n   * @param {Types} type\n   * @param {ValidKey} key\n   * @param {FindByKeyOptions} options\n   * @returns {SingleItemQuery<Result>}\n   * @throws {InvalidTypeError}\n   */\n  public findByKey<Result extends NdbDocument>(type: Types,\n                                               key: ValidKey,\n                                               options?: FindByKeyOptions): SingleItemQuery<Result> {\n    return new SingleItemQuery<Result>(this._context, this.isAutoClose(options), type, key);\n  }\n\n  /**\n   * @inheritDoc\n   *\n   * @param {Types} type\n   * @param {Item|Item[]} item\n   * @param {CreateOptions} options\n   * @returns {Promise<boolean>}\n   * @throws {MissingKeyError}\n   */\n  public async create<Item extends NdbDocument>(type: Types,\n                                                item: Item | Item[],\n                                                options?: CreateOptions): Promise<boolean> {\n    const cmd = this._context.commandFactory().createCommand<Item>(type);\n    const success = await cmd.execute(item, options ? options.parent : null);\n    this.autoClose(options);\n    return success;\n  }\n\n  /**\n   * @inheritDoc\n   *\n   * @param {Types} type\n   * @param {Item|Item[]} item\n   * @param {UpdateOptions} options\n   * @returns {Promise<boolean>}\n   * @throws {MissingKeyError}\n   * @throws {NotFoundError}\n   */\n  public async update<Item extends NdbDocument>(type: Types,\n                                                item: Item | Item[],\n                                                options?: UpdateOptions): Promise<boolean> {\n    const cmd = this._context.commandFactory().updateCommand<Item>(type);\n    const success = await cmd.execute(item, options && options.isPartialUpdate);\n    this.autoClose(options);\n    return success;\n  }\n\n  /**\n   * @inheritDoc\n   *\n   * @param {Types} type\n   * @param {ValidKey} key\n   * @param {Data} data\n   * @param {SetOptions} options\n   * @returns {Promise<boolean>}\n   * @throws {MissingKeyError}\n   * @throws {NotFoundError}\n   */\n  public async set<Data extends object>(type: Types, key: ValidKey, data: Data, options?: SetOptions): Promise<boolean> {\n    const cmd = this._context.commandFactory().setCommand<Data>(type);\n    const success = await cmd.execute(key, data);\n    this.autoClose(options);\n    return success;\n  }\n\n  /**\n   * @inheritDoc\n   *\n   * @param {Types} type\n   * @param {Item|Item[]} item\n   * @param {PutOptions} options\n   * @returns {Promise<boolean>}\n   */\n  public async put<Item extends NdbDocument>(type: Types, item: Item | Item[], options?: PutOptions): Promise<boolean> {\n    const cmd = this._context.commandFactory().putCommand<Item>(type);\n    const success = await (options\n        ? cmd.execute(item, options.parent, options.isPartialUpdate)\n        : cmd.execute(item));\n    this.autoClose(options);\n    return success;\n  }\n\n  /**\n   * @inheritDoc\n   *\n   * @param {Types} type\n   * @param {Item|ValidKey} item\n   * @param {RemoveOptions} options\n   * @returns {Promise<boolean>}\n   * @throws {NotFoundError}\n   */\n  public async remove<Item extends NdbDocument>(type: Types,\n                                                item: Item | ValidKey,\n                                                options?: RemoveOptions): Promise<boolean> {\n    const cmd = this._context.commandFactory().removeCommand<Item>(type);\n    const success = await cmd.execute(item);\n    this.autoClose(options);\n    return success;\n  }\n\n  /**\n   * @inheritDoc\n   *\n   * @param {string|string[]} type\n   * @param {ClearOptions} options\n   * @returns {Promise<boolean>}\n   */\n  public async clear(type?: string | string[], options?: ClearOptions): Promise<boolean> {\n    const success = await this._context.commandFactory().clearCommand(options && options.includeLogs).execute(type);\n    this.autoClose(options);\n    return success;\n  }\n\n  private isAutoClose(options: BaseOptions): boolean {\n    return (options && options.autoCloseContext) || this._autoCloseContext;\n  }\n\n  private async autoClose(options: BaseOptions): Promise<void> {\n    if (this.isAutoClose(options)) {\n      await this._context.close();\n    }\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/data-store/data-store.ts","import { BaseOptions } from './base-options';\nimport { ClearOptions } from './clear-options';\nimport { CountOptions } from './count-options';\nimport { CreateOptions } from './create-options';\nimport { FindByKeyOptions } from './find-by-key-options';\nimport { FindOptions } from './find-options';\nimport { PutOptions } from './put-options';\nimport { RemoveOptions } from './remove-options';\nimport { SetOptions } from './set-options';\nimport { UpdateOptions } from './update-options';\n\nexport * from './builder';\n\nexport {\n  BaseOptions,\n  CountOptions,\n  FindOptions,\n  FindByKeyOptions,\n  CreateOptions,\n  UpdateOptions,\n  SetOptions,\n  PutOptions,\n  RemoveOptions,\n  ClearOptions\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/data-store/options/index.ts","import { BaseOptionsBuilder } from './base-options.builder';\nimport { ClearOptionsBuilder } from './clear-options.builder';\nimport { CountOptionsBuilder } from './count-options.builder';\nimport { CreateOptionsBuilder } from './create-options.builder';\nimport { FindByKeyOptionsBuilder } from './find-by-key-options.builder';\nimport { FindOptionsBuilder } from './find-options.builder';\nimport { PutOptionsBuilder } from './put-options.builder';\nimport { RemoveOptionsBuilder } from './remove-options.builder';\nimport { SetOptionsBuilder } from './set-options.builder';\nimport { UpdateOptionsBuilder } from './update-options.builder';\n\nexport {\n  BaseOptionsBuilder,\n  CountOptionsBuilder,\n  FindOptionsBuilder,\n  FindByKeyOptionsBuilder,\n  CreateOptionsBuilder,\n  UpdateOptionsBuilder,\n  SetOptionsBuilder,\n  PutOptionsBuilder,\n  RemoveOptionsBuilder,\n  ClearOptionsBuilder\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/data-store/options/builder/index.ts","import { ClearOptions } from '../clear-options';\nimport { BaseOptionsBuilder } from './base-options.builder';\n\nexport class ClearOptionsBuilder extends BaseOptionsBuilder<ClearOptions> {\n\n  private _includeLogs: boolean;\n\n  public includeLogs(value: boolean): this {\n    this._includeLogs = value;\n    return this;\n  }\n\n  public build(): ClearOptions {\n    return this.assignBase({ includeLogs: this._includeLogs });\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/data-store/options/builder/clear-options.builder.ts","import { CountOptions } from '../count-options';\nimport { BaseOptionsBuilder } from './base-options.builder';\n\nexport class CountOptionsBuilder extends BaseOptionsBuilder<CountOptions> {\n\n  public build(): CountOptions {\n    return this.buildBase();\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/data-store/options/builder/count-options.builder.ts","import { Parent } from '../../../model/parent';\nimport { CreateOptions } from '../create-options';\nimport { BaseOptionsBuilder } from './base-options.builder';\n\nexport class CreateOptionsBuilder extends BaseOptionsBuilder<CreateOptions> {\n\n  private _parent: Parent;\n\n  public parent(value: Parent): this {\n    this._parent = value;\n    return this;\n  }\n\n  public build(): CreateOptions {\n    return this.assignBase({ parent: this._parent });\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/data-store/options/builder/create-options.builder.ts","import { FindByKeyOptions } from '../find-by-key-options';\nimport { BaseOptionsBuilder } from './base-options.builder';\n\nexport class FindByKeyOptionsBuilder extends BaseOptionsBuilder<FindByKeyOptions> {\n\n  public build(): FindByKeyOptions {\n    return this.buildBase();\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/data-store/options/builder/find-by-key-options.builder.ts","import { FindOptions } from '../find-options';\nimport { BaseOptionsBuilder } from './base-options.builder';\n\nexport class FindOptionsBuilder extends BaseOptionsBuilder<FindOptions> {\n\n  public build(): FindOptions {\n    return this.buildBase();\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/data-store/options/builder/find-options.builder.ts","import { Parent } from '../../../model/parent';\nimport { PutOptions } from '../put-options';\nimport { BaseOptionsBuilder } from './base-options.builder';\n\nexport class PutOptionsBuilder extends BaseOptionsBuilder<PutOptions> {\n\n  private _parent: Parent;\n  private _isPartialUpdate: boolean;\n\n  public parent(value: Parent): this {\n    this._parent = value;\n    return this;\n  }\n\n  public isPartialUpdate(value: boolean): this {\n    this._isPartialUpdate = value;\n    return this;\n  }\n\n  public build(): PutOptions {\n    return this.assignBase({\n      parent: this._parent,\n      isPartialUpdate: this._isPartialUpdate\n    });\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/data-store/options/builder/put-options.builder.ts","import { RemoveOptions } from '../remove-options';\nimport { BaseOptionsBuilder } from './base-options.builder';\n\nexport class RemoveOptionsBuilder extends BaseOptionsBuilder<RemoveOptions> {\n\n  public build(): RemoveOptions {\n    return this.buildBase();\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/data-store/options/builder/remove-options.builder.ts","import { SetOptions } from '../set-options';\nimport { BaseOptionsBuilder } from './base-options.builder';\n\nexport class SetOptionsBuilder extends BaseOptionsBuilder<SetOptions> {\n\n  public build(): SetOptions {\n    return this.buildBase();\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/data-store/options/builder/set-options.builder.ts","import { PutOptions } from '../put-options';\nimport { UpdateOptions } from '../update-options';\nimport { BaseOptionsBuilder } from './base-options.builder';\n\nexport class UpdateOptionsBuilder extends BaseOptionsBuilder<UpdateOptions> {\n\n  private _isPartialUpdate: boolean;\n\n  public isPartialUpdate(value: boolean): this {\n    this._isPartialUpdate = value;\n    return this;\n  }\n\n  public build(): PutOptions {\n    return this.assignBase({ isPartialUpdate: this._isPartialUpdate });\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/data-store/options/builder/update-options.builder.ts","import { BaseEvent } from './base-event';\nimport { ClearedEvent } from './cleared-event';\nimport { CreatedEvent } from './created-event';\nimport { RemovedEvent } from './removed-event';\nimport { UpdatedEvent } from './updated-event';\n\nexport * from './utility';\n\nexport {\n  BaseEvent,\n  CreatedEvent,\n  UpdatedEvent,\n  RemovedEvent,\n  ClearedEvent\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/event/index.ts","import { EventPipe } from './event-pipe';\nimport { EventQueue } from './event-queue';\nimport { EventRegistration } from './event-registration';\nimport { EventRegistrationBuilder } from './event-registration.builder';\nimport { OnDataChanged } from './on-data-changed';\n\nexport {\n  OnDataChanged,\n  EventRegistration,\n  EventRegistrationBuilder,\n  EventPipe,\n  EventQueue\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/event/utility/index.ts","import { Logger } from './logger';\n\nexport * from './clear-command';\nexport * from './config';\nexport * from './idb-logging';\nexport * from './model';\nexport * from './query';\n\nexport {\n  Logger\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/logging/index.ts","import { ClearLogsCommand } from './clear-logs-command';\nimport { ClearLogsOptions } from './clear-logs-options';\nimport { ClearLogsOptionsBuilder } from './clear-logs-options.builder';\n\nexport {\n  ClearLogsCommand,\n  ClearLogsOptions,\n  ClearLogsOptionsBuilder\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/logging/clear-command/index.ts","import { ValidKey } from '@normalized-db/core';\nimport { BaseOptionsBuilder } from '../../data-store/options/builder/base-options.builder';\nimport { DataStoreTypes } from '../../model/data-store-types';\nimport { ClearLogsOptions } from './clear-logs-options';\n\nexport class ClearLogsOptionsBuilder<Types extends DataStoreTypes>\n    extends BaseOptionsBuilder<ClearLogsOptions<Types>> {\n\n  private _types?: Types | Types[];\n  private _key?: ValidKey;\n\n  public types(value: Types | Types[]): this {\n    this._types = value;\n    return this;\n  }\n\n  public key(value: ValidKey): this {\n    this._key = value;\n    return this;\n  }\n\n  public build(): ClearLogsOptions<Types> {\n    return this.assignBase({\n      types: this._types,\n      key: this._key\n    });\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/logging/clear-command/clear-logs-options.builder.ts","import { LogConfig } from './log-config';\nimport { LogConfigBuilder } from './log-config.builder';\n\nexport {\n  LogConfig,\n  LogConfigBuilder\n};\n\n\n// WEBPACK FOOTER //\n// ./src/logging/config/index.ts","import { IStoreLogConfig } from '@normalized-db/core';\nimport { DataStoreTypes } from '../../model/data-store-types';\nimport { LogConfig } from './log-config';\n\nexport class LogConfigBuilder<Types extends DataStoreTypes> {\n\n  private readonly _types = new Map<Types, IStoreLogConfig>();\n\n  private _defaultConfig: IStoreLogConfig;\n\n  public setDefault(config: IStoreLogConfig): this {\n    this._defaultConfig = config;\n    return this;\n  }\n\n  public hasType(type: Types): boolean {\n    return this._types.has(type);\n  }\n\n  public setType(type: Types, config: IStoreLogConfig): this {\n    this._types.set(type, config);\n    return this;\n  }\n\n  public removeType(type: Types): this {\n    this._types.delete(type);\n    return this;\n  }\n\n  public build(): LogConfig<Types> {\n    return new LogConfig<Types>(this._types, this._defaultConfig);\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/logging/config/log-config.builder.ts","import { IdbClearLogsCommand } from './idb-clear-logs-command';\nimport { IdbLogQueryRunner } from './idb-log-query-runner';\nimport { IdbLogger } from './idb-logger';\n\nexport {\n  IdbLogger,\n  IdbLogQueryRunner,\n  IdbClearLogsCommand\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/logging/idb-logging/index.ts","import { LogAction } from './log-action';\nimport { LogEntry } from './log-entry';\n\nexport {\n  LogAction,\n  LogEntry\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/logging/model/index.ts","import { LogQuery } from './log-query';\nimport { LogQueryConfig } from './log-query-config';\nimport { LogQueryRunner } from './log-query-runner';\n\nexport {\n  LogQuery,\n  LogQueryConfig,\n  LogQueryRunner\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/logging/query/index.ts","import { ValidKey } from '@normalized-db/core/lib/src/model/valid-key';\nimport { Parent } from '../../model/parent';\nimport { Predicate } from '../../model/predicate';\nimport { LogAction } from '../model/log-action';\nimport { LogEntry } from '../model/log-entry';\n\nexport class LogQueryConfig {\n\n  public dateRange: IDBKeyRange;\n  public type: string;\n  public key: ValidKey;\n  public action: LogAction;\n  public parent: Parent;\n  public filter: Predicate<LogEntry<any>>;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/logging/query/log-query-config.ts","import { DataStoreTypes } from './data-store-types';\nimport { Parent } from './parent';\nimport { Predicate } from './predicate';\n\nexport {\n  DataStoreTypes,\n  Parent,\n  Predicate\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/model/index.ts","import { BaseQuery } from './base-query';\nimport { CountQuery } from './count-query';\nimport { Query } from './query';\nimport { Queryable } from './queryable';\nimport { SingleItemQuery } from './single-item-query';\n\nexport * from './list-result';\nexport * from './map-reduce';\nexport * from './model';\nexport * from './runner';\n\nexport {\n  Queryable,\n  BaseQuery,\n  CountQuery,\n  Query,\n  SingleItemQuery\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/query/index.ts","import { MapFunc } from './map-func';\nimport { Mapper } from './mapper';\nimport { ReducerFunc } from './reduce-func';\nimport { Reducer } from './reducer';\n\nexport {\n  MapFunc,\n  Mapper,\n  ReducerFunc,\n  Reducer\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/query/map-reduce/index.ts","import { Filter } from './filter';\nimport { OrderBy } from './order-by';\nimport { Orderable } from './orderable';\nimport { QueryConfig } from './query-config';\nimport { Sorter } from './sorter';\n\nexport * from './order';\n\nexport {\n  Filter,\n  QueryConfig,\n  Sorter,\n  OrderBy,\n  Orderable\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/query/model/index.ts","import { CountQueryRunner } from './count-query-runner';\nimport { QueryRunner } from './query-runner';\nimport { QueryRunnerFactory } from './query-runner-factory';\nimport { SingleItemQueryRunner } from './single-item-query-runner';\n\nexport * from './idb-runner';\n\nexport {\n  QueryRunnerFactory,\n  CountQueryRunner,\n  QueryRunner,\n  SingleItemQueryRunner\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/query/runner/index.ts","import { IdbBaseDocumentQueryRunner } from './idb-base-document-query-runner';\nimport { IdbBaseQueryRunner } from './idb-base-query-runner';\nimport { IdbCountQueryRunner } from './idb-count-query-runner';\nimport { IdbQueryRunner } from './idb-query-runner';\nimport { IdbQueryRunnerFactory } from './idb-query-runner-factory';\nimport { IdbSingleItemQueryRunner } from './idb-single-item-query-runner';\n\nexport {\n  IdbQueryRunnerFactory,\n  IdbBaseQueryRunner,\n  IdbBaseDocumentQueryRunner,\n  IdbCountQueryRunner,\n  IdbQueryRunner,\n  IdbSingleItemQueryRunner\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/query/runner/idb-runner/index.ts","import { RefsWriteUtility } from './refs-write';\nimport { isValidKey } from './valid-key';\n\nexport {\n  RefsWriteUtility,\n  isValidKey\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/utility/index.ts"],"sourceRoot":""}